{"version":3,"file":"js/7287.1d706566.js","mappings":"qQAEIA,EAAAA,EAAAA,GAAgC,MAA5BC,MAAM,eAAc,OAAG,K,GACtBA,MAAM,iB,UAKXD,EAAAA,EAAAA,GAAmC,OAA9BC,MAAM,mBAAiB,W,UAE9BD,EAAAA,EAAAA,GAAgC,OAA3BE,GAAG,mBAAiB,W,uEATzBF,EAAAA,EAAAA,GAQM,OARDC,MAAM,QAA2BE,OAAK,QAAEC,EAAAA,Q,CAC3CC,GACAL,EAAAA,EAAAA,GAIM,MAJNM,EAIM,EAHJN,EAAAA,EAAAA,GAA4B,WAAvB,OAAG,QAAGI,EAAAA,KAAKG,KAAG,IACnBP,EAAAA,EAAAA,GAA4B,WAAvB,OAAG,QAAGI,EAAAA,KAAKI,KAAG,IACnBR,EAAAA,EAAAA,GAA+B,WAA1B,OAAG,QAAGI,EAAAA,KAAKK,QAAM,KAExBC,GAAmC,UAPVN,EAAAA,YAS3BO,GAAgC,G,sGAOlC,IAAIC,EACAC,EACAC,EAEJ,OACEC,OACE,MAAO,CACLC,UAAU,EACVb,MAAO,CACLc,SAAU,WACVC,IAAK,QACLC,KAAM,SAERC,KAAM,CACJb,IAAK,EACLC,IAAK,EACLC,OAAQ,GAGd,EACAY,UACEC,KAAKC,MACP,EACAC,QAAS,CACPC,aACE,MAAMC,EAAS,IAAIC,EAAAA,EAAc,kBAAmB,CAClDC,sBAAuBD,EAAAA,IACvBE,WAAW,EACXC,UAAU,IAERH,EAAAA,EAAAA,oCAEFD,EAAOK,gBAAkBC,OAAOC,kBAElCP,EAAOQ,MAAMC,kBAAkBC,KAAKC,SAAU,EAC9CX,EAAOQ,MAAMI,0BAA2B,EAGxCZ,EAAOa,OAAOC,MAAM,CAClBC,YAAad,EAAAA,EAAAA,YAA6B,GAAI,EAAG,IAAK,IACtDe,SAAU,IAGZ9B,EAAU,IAAIe,EAAAA,EAA+BD,EAAOQ,MAAMS,QAC1D/B,EAAQgC,gBAAgBC,IAOtB,GANIhC,IACFA,IACAA,OAAWiC,EACXxB,KAAKN,UAAW,GAGdU,EAAOE,2BAA2BD,EAAAA,EACpCb,EAAgBY,EAAOQ,MAAMK,OAAOQ,cAAcF,EAAM5B,cAGrD,CACH,MAAM+B,EAAMtB,EAAOa,OAAOU,WAAWJ,EAAM5B,UAC3CH,EAAgBY,EAAOQ,MAAMgB,MAAMC,KAAKH,EAAKtB,EAAOQ,MACtD,CACA,GAAIpB,EAAe,CACjB,MAAMG,EAAWS,EAAOQ,MAAMgB,MAAME,UAAUC,wBAAwBvC,GAChEP,EAAMoB,EAAAA,EAAAA,UAAsBV,EAASqC,WAAWC,QAAQ,GACxD/C,EAAMmB,EAAAA,EAAAA,UAAsBV,EAASuC,UAAUD,QAAQ,GACvD9C,EAASQ,EAASR,OAAO8C,QAAQ,GACvCjC,KAAKF,KAAO,CAAEb,IAAKA,EAAKC,IAAKA,EAAKC,OAAQA,GAC1CI,EAAWa,EAAOQ,MAAMuB,WAAWC,kBAAiB,KAClD,MAAMC,EAAiBhC,EAAAA,EAAAA,yBAAgDD,EAAOQ,MAAOpB,GACrF,GAAI6C,EAAgB,CAClB,IAAI1C,EAAW,CAAEC,IAAKyC,EAAeC,EAAI,IAAM,KAAMzC,KAAMwC,EAAeE,EAAI,IAAU,MACxFvC,KAAKnB,MAAQ2D,OAAOC,OAAOzC,KAAKnB,MAAOc,GACvCK,KAAKN,UAAW,CAClB,IAEJ,IACCW,EAAAA,EAAAA,WACL,I,WCrFJ,MAAMqC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/public/info_window.vue","webpack://webgis/./src/components/public/info_window.vue?71ac"],"sourcesContent":["<template>\n  <div class=\"popup\" v-show=\"visiable\" :style=\"style\">\n    <h2 class=\"popup-title\">经纬度</h2>\n    <div class=\"popup-content\">\n      <div>经度：{{ info.lon }}</div>\n      <div>纬度：{{ info.lat }}</div>\n      <div>高度：{{ info.height }}</div>\n    </div>\n    <div class='triangle-bottom'></div>\n  </div>\n  <div id=\"cesiumContainer\"></div>\n</template>\n\n<script>\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\nimport * as Cesium from 'cesium'\n\nlet handler = undefined\nlet listener = undefined\nlet earthPosition = undefined\n\nexport default {\n  data() {\n    return {\n      visiable: false,\n      style: {\n        position: 'absolute',\n        top: '100px',\n        left: '100px',\n      },\n      info: {\n        lon: 0,\n        lat: 0,\n        height: 0\n      }\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    async init() {\n      const viewer = new Cesium.Viewer('cesiumContainer', {\n        terrainProvider: await Cesium.createWorldTerrainAsync(),\n        animation: false,\n        timeline: false,\n      })\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\n        //判断是否支持图像渲染像素化处理\n        viewer.resolutionScale = window.devicePixelRatio\n      }\n      viewer.scene.postProcessStages.fxaa.enabled = true\n      viewer.scene.debugShowFramesPerSecond = true // 显示帧率\n\n      // 定位到中国\n      viewer.camera.flyTo({\n        destination: Cesium.Rectangle.fromDegrees(73, 3, 136, 54),\n        duration: 0,\n      })\n\n      handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas)\n      handler.setInputAction((click) => {\n        if (listener) {\n          listener()\n          listener = undefined\n          this.visiable = false\n        }\n        // 球面\n        if (viewer.terrainProvider instanceof Cesium.EllipsoidTerrainProvider) {\n          earthPosition = viewer.scene.camera.pickEllipsoid(click.position);\n        }\n        // 地形\n        else {\n          const ray = viewer.camera.getPickRay(click.position);\n          earthPosition = viewer.scene.globe.pick(ray, viewer.scene);\n        }\n        if (earthPosition) {\n          const position = viewer.scene.globe.ellipsoid.cartesianToCartographic(earthPosition)\n          const lon = Cesium.Math.toDegrees(position.longitude).toFixed(6)\n          const lat = Cesium.Math.toDegrees(position.latitude).toFixed(6)\n          const height = position.height.toFixed(2)\n          this.info = { lon: lon, lat: lat, height: height }\n          listener = viewer.scene.postRender.addEventListener(() => {\n            const windowPosition = Cesium.SceneTransforms.wgs84ToWindowCoordinates(viewer.scene, earthPosition);\n            if (windowPosition) {\n              let position = { top: windowPosition.y - 115 + 'px', left: windowPosition.x - 200 / 2 + 'px' }\n              this.style = Object.assign(this.style, position)\n              this.visiable = true\n            }\n          })\n        }\n      }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#cesiumContainer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n\n.popup {\n  z-index: 1000;\n  width: 200px;\n  height: 100px;\n  border: 2px solid #ffffff;\n  border-radius: 4px;\n  box-shadow: 0px 0px 2px grey;\n  position: absolute;\n  background-color: #7fd3cad9;\n\n  .popup-title {\n    text-align: center;\n    font-size: 18px;\n    margin: 0px;\n    height: 25px;\n  }\n\n  .popup-content {\n    margin: 0px 10px;\n    height: 75px;\n  }\n\n  .triangle-bottom {\n    width: 0;\n    height: 0;\n    border-top: 10px solid #ffffff;\n    border-left: 10px dashed transparent;\n    border-right: 10px dashed transparent;\n    position: absolute;\n    left: 90px;\n    top: 100px;\n  }\n}\n</style>\n","import { render } from \"./info_window.vue?vue&type=template&id=4c832bb6&scoped=true\"\nimport script from \"./info_window.vue?vue&type=script&lang=js\"\nexport * from \"./info_window.vue?vue&type=script&lang=js\"\n\nimport \"./info_window.vue?vue&type=style&index=0&id=4c832bb6&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhengjie/Documents/webgis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4c832bb6\"]])\n\nexport default __exports__"],"names":["_createElementVNode","class","id","style","$data","_hoisted_1","_hoisted_2","lon","lat","height","_hoisted_3","_hoisted_4","handler","listener","earthPosition","data","visiable","position","top","left","info","mounted","this","init","methods","async","viewer","Cesium","terrainProvider","animation","timeline","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","debugShowFramesPerSecond","camera","flyTo","destination","duration","canvas","setInputAction","click","undefined","pickEllipsoid","ray","getPickRay","globe","pick","ellipsoid","cartesianToCartographic","longitude","toFixed","latitude","postRender","addEventListener","windowPosition","y","x","Object","assign","__exports__","render"],"sourceRoot":""}