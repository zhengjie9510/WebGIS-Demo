"use strict";(self["webpackChunkwebgis"]=self["webpackChunkwebgis"]||[]).push([[1289],{41289:function(e,t,n){n.d(t,{Z:function(){return pe}});n(57658);var o=n(76630),r=n(40617),i=n(33350),s=n(62392),c=n(82830),l=n(49721),u=n(51625),a=n(46816),f=n(54013),Z=n(33261);function h(e){if(!(0,u.Z)(e))throw new a.Z("uri is required.");const t=new Z(e);t.normalize();let n=t.path();const o=n.lastIndexOf("/");return-1!==o&&(n=n.substr(o+1)),n}var p=h,d=n(20362),g=n(32882),m=n(23802),y=n(49810),w=n(21737),k=n(37706),_=n(19853),C=n(71964),b=n(74683),P=n(2249),S=n(41156),v=n(6047),L=n(36625),O=n(28832),T=n(15567),M=n(98795),E=n(75882);function G(e){return r.Z.fromDegrees(e[0],e[1],e[2])}const U={"urn:ogc:def:crs:OGC:1.3:CRS84":G,"EPSG:4326":G,"urn:ogc:def:crs:EPSG::4326":G},$={},B={};let z,j=48,W=i.Z.ROYALBLUE,A=i.Z.YELLOW,N=2,R=i.Z.fromBytes(255,255,0,100),I=!1;const x={small:24,medium:48,large:64},H=["title","description","marker-size","marker-symbol","marker-color","stroke","stroke-opacity","stroke-width","fill","fill-opacity"];function J(e,t){let n="";for(const o in e)if(e.hasOwnProperty(o)){if(o===t||-1!==H.indexOf(o))continue;const r=e[o];(0,u.Z)(r)&&(n+="object"===typeof r?`<tr><th>${o}</th><td>${J(r)}</td></tr>`:`<tr><th>${o}</th><td>${r}</td></tr>`)}return n.length>0&&(n=`<table class="cesium-infoBox-defaultTable"><tbody>${n}</tbody></table>`),n}function V(e,t,n){let o;return function(r,i){return(0,u.Z)(o)||(o=e(t,n)),o}}function q(e,t){return new b.Z(V(J,e,t),!0)}function F(e,t,n){let o=e.id;if((0,u.Z)(o)&&"Feature"===e.type){let e=2,n=o;while((0,u.Z)(t.getById(n)))n=`${o}_${e}`,e++;o=n}else o=(0,s.Z)();const r=t.getOrCreateEntity(o),i=e.properties;if((0,u.Z)(i)){let e;r.properties=i;const t=i.title;if((0,u.Z)(t))r.name=t,e="title";else{let t=Number.MAX_VALUE;for(const n in i)if(i.hasOwnProperty(n)&&i[n]){const o=n.toLowerCase();if(t>1&&"title"===o){t=1,e=n;break}t>2&&"name"===o?(t=2,e=n):t>3&&/title/i.test(n)?(t=3,e=n):t>4&&/name/i.test(n)&&(t=4,e=n)}(0,u.Z)(e)&&(r.name=i[e])}const o=i.description;null!==o&&(r.description=(0,u.Z)(o)?new v.Z(o):n(i,e))}return r}function Y(e,t){const n=new Array(e.length);for(let o=0;o<e.length;o++)n[o]=t(e[o]);return n}const D={Feature:K,FeatureCollection:Q,GeometryCollection:ee,LineString:ie,MultiLineString:se,MultiPoint:oe,MultiPolygon:ue,Point:ne,Polygon:le,Topology:ae},X={GeometryCollection:ee,LineString:ie,MultiLineString:se,MultiPoint:oe,MultiPolygon:ue,Point:ne,Polygon:le,Topology:ae};function K(e,t,n,o,r){if(null===t.geometry)return void F(t,e._entityCollection,r.describe);if(!(0,u.Z)(t.geometry))throw new y.Z("feature.geometry is required.");const i=t.geometry.type,s=X[i];if(!(0,u.Z)(s))throw new y.Z(`Unknown geometry type: ${i}`);s(e,t,t.geometry,o,r)}function Q(e,t,n,o,r){const i=t.features;for(let s=0,c=i.length;s<c;s++)K(e,i[s],void 0,o,r)}function ee(e,t,n,o,r){const i=n.geometries;for(let s=0,c=i.length;s<c;s++){const n=i[s],c=n.type,l=X[c];if(!(0,u.Z)(l))throw new y.Z(`Unknown geometry type: ${c}`);l(e,t,n,o,r)}}function te(e,t,n,o,r){let s=r.markerSymbol,c=r.markerColor,a=r.markerSize;const f=t.properties;if((0,u.Z)(f)){const e=f["marker-color"];(0,u.Z)(e)&&(c=i.Z.fromCssColorString(e)),a=(0,l.Z)(x[f["marker-size"]],a);const t=f["marker-symbol"];(0,u.Z)(t)&&(s=t)}let Z;Z=(0,u.Z)(s)?1===s.length?e._pinBuilder.fromText(s.toUpperCase(),c,a):e._pinBuilder.fromMakiIconId(s,c,a):e._pinBuilder.fromColor(c,a);const h=new C.Z;h.verticalOrigin=new v.Z(k.Z.BOTTOM),2===o.length&&r.clampToGround&&(h.heightReference=w.Z.CLAMP_TO_GROUND);const p=F(t,e._entityCollection,r.describe);p.billboard=h,p.position=new S.Z(n(o));const d=Promise.resolve(Z).then((function(e){h.image=new v.Z(e)})).catch((function(){h.image=new v.Z(e._pinBuilder.fromColor(c,a))}));e._promises.push(d)}function ne(e,t,n,o,r){te(e,t,o,n.coordinates,r)}function oe(e,t,n,o,r){const i=n.coordinates;for(let s=0;s<i.length;s++)te(e,t,o,i[s],r)}function re(e,t,n,r,s){let c=s.strokeMaterialProperty,l=s.strokeWidthProperty;const a=t.properties;if((0,u.Z)(a)){const e=a["stroke-width"];let t;(0,u.Z)(e)&&(l=new v.Z(e));const n=a.stroke;(0,u.Z)(n)&&(t=i.Z.fromCssColorString(n));const o=a["stroke-opacity"];(0,u.Z)(o)&&1!==o&&((0,u.Z)(t)||(t=c.color.getValue().clone()),t.alpha=o),(0,u.Z)(t)&&(c=new P.Z(t))}const f=F(t,e._entityCollection,s.describe),Z=new E.Z;f.polyline=Z,Z.clampToGround=s.clampToGround,Z.material=c,Z.width=l,Z.positions=new v.Z(Y(r,n)),Z.arcType=o.Z.RHUMB}function ie(e,t,n,o,r){re(e,t,o,n.coordinates,r)}function se(e,t,n,o,r){const i=n.coordinates;for(let s=0;s<i.length;s++)re(e,t,o,i[s],r)}function ce(e,t,n,r,s){if(0===r.length||0===r[0].length)return;let c=s.strokeMaterialProperty.color,l=s.fillMaterialProperty,a=s.strokeWidthProperty;const f=t.properties;if((0,u.Z)(f)){const e=f["stroke-width"];let t;(0,u.Z)(e)&&(a=new v.Z(e));const n=f.stroke;(0,u.Z)(n)&&(t=i.Z.fromCssColorString(n));let o,r=f["stroke-opacity"];(0,u.Z)(r)&&1!==r&&((0,u.Z)(t)||(t=c.getValue().clone()),t.alpha=r),(0,u.Z)(t)&&(c=new v.Z(t));const s=f.fill,Z=l.color.getValue();(0,u.Z)(s)&&(o=i.Z.fromCssColorString(s),o.alpha=Z.alpha),r=f["fill-opacity"],(0,u.Z)(r)&&r!==Z.alpha&&((0,u.Z)(o)||(o=Z.clone()),o.alpha=r),(0,u.Z)(o)&&(l=new P.Z(o))}const Z=new M.Z;Z.outline=new v.Z(!0),Z.outlineColor=c,Z.outlineWidth=a,Z.material=l,Z.arcType=o.Z.RHUMB;const h=[];for(let o=1,i=r.length;o<i;o++)h.push(new g.Z(Y(r[o],n)));const p=r[0];Z.hierarchy=new v.Z(new g.Z(Y(p,n),h)),p[0].length>2?Z.perPositionHeight=new v.Z(!0):s.clampToGround||(Z.height=0);const d=F(t,e._entityCollection,s.describe);d.polygon=Z}function le(e,t,n,o,r){ce(e,t,o,n.coordinates,r)}function ue(e,t,n,o,r){const i=n.coordinates;for(let s=0;s<i.length;s++)ce(e,t,o,i[s],r)}function ae(e,t,n,o,r){for(const i in n.objects)if(n.objects.hasOwnProperty(i)){const t=_.zL(n,n.objects[i]),s=D[t.type];s(e,t,t,o,r)}}function fe(e){this._name=e,this._changed=new f.Z,this._error=new f.Z,this._isLoading=!1,this._loading=new f.Z,this._entityCollection=new T.Z(this),this._promises=[],this._pinBuilder=new d.Z,this._entityCluster=new O.Z,this._credit=void 0,this._resourceCredits=[]}function Ze(e,t,n,o){if(!(0,u.Z)(t))throw new a.Z("data is required.");L.Z.setLoading(e,!0),n=(0,l.Z)(n,l.Z.EMPTY_OBJECT);let r=n.credit;"string"===typeof r&&(r=new c.Z(r)),e._credit=r;let i=t,s=n.sourceUri;if("string"===typeof t||t instanceof m.Z){t=m.Z.createIfNeeded(t),i=t.fetchJson(),s=(0,l.Z)(s,t.getUrlComponent());const n=e._resourceCredits,o=t.credits;if((0,u.Z)(o)){const e=o.length;for(let t=0;t<e;t++)n.push(o[t])}}return n={describe:(0,l.Z)(n.describe,q),markerSize:(0,l.Z)(n.markerSize,j),markerSymbol:(0,l.Z)(n.markerSymbol,z),markerColor:(0,l.Z)(n.markerColor,W),strokeWidthProperty:new v.Z((0,l.Z)(n.strokeWidth,N)),strokeMaterialProperty:new P.Z((0,l.Z)(n.stroke,A)),fillMaterialProperty:new P.Z((0,l.Z)(n.fill,R)),clampToGround:(0,l.Z)(n.clampToGround,I)},Promise.resolve(i).then((function(t){return he(e,t,n,s,o)})).catch((function(t){throw L.Z.setLoading(e,!1),e._error.raiseEvent(e,t),t}))}function he(e,t,n,o,r){let i;(0,u.Z)(o)&&(i=p(o)),(0,u.Z)(i)&&e._name!==i&&(e._name=i,e._changed.raiseEvent(e));const s=D[t.type];if(!(0,u.Z)(s))throw new y.Z(`Unsupported GeoJSON object type: ${t.type}`);const c=t.crs;let l=null!==c?G:null;if((0,u.Z)(c)){if(!(0,u.Z)(c.properties))throw new y.Z("crs.properties is undefined.");const e=c.properties;if("name"===c.type){if(l=U[e.name],!(0,u.Z)(l))throw new y.Z(`Unknown crs name: ${e.name}`)}else if("link"===c.type){let t=$[e.href];if((0,u.Z)(t)||(t=B[e.type]),!(0,u.Z)(t))throw new y.Z(`Unable to resolve crs link: ${JSON.stringify(e)}`);l=t(e)}else{if("EPSG"!==c.type)throw new y.Z(`Unknown crs type: ${c.type}`);if(l=U[`EPSG:${e.code}`],!(0,u.Z)(l))throw new y.Z(`Unknown crs EPSG code: ${e.code}`)}}return Promise.resolve(l).then((function(o){return r&&e._entityCollection.removeAll(),null!==o&&s(e,t,t,o,n),Promise.all(e._promises).then((function(){return e._promises.length=0,L.Z.setLoading(e,!1),e}))}))}fe.load=function(e,t){return(new fe).load(e,t)},Object.defineProperties(fe,{markerSize:{get:function(){return j},set:function(e){j=e}},markerSymbol:{get:function(){return z},set:function(e){z=e}},markerColor:{get:function(){return W},set:function(e){W=e}},stroke:{get:function(){return A},set:function(e){A=e}},strokeWidth:{get:function(){return N},set:function(e){N=e}},fill:{get:function(){return R},set:function(e){R=e}},clampToGround:{get:function(){return I},set:function(e){I=e}},crsNames:{get:function(){return U}},crsLinkHrefs:{get:function(){return $}},crsLinkTypes:{get:function(){return B}}}),Object.defineProperties(fe.prototype,{name:{get:function(){return this._name},set:function(e){this._name!==e&&(this._name=e,this._changed.raiseEvent(this))}},clock:{value:void 0,writable:!1},entities:{get:function(){return this._entityCollection}},isLoading:{get:function(){return this._isLoading}},changedEvent:{get:function(){return this._changed}},errorEvent:{get:function(){return this._error}},loadingEvent:{get:function(){return this._loading}},show:{get:function(){return this._entityCollection.show},set:function(e){this._entityCollection.show=e}},clustering:{get:function(){return this._entityCluster},set:function(e){if(!(0,u.Z)(e))throw new a.Z("value must be defined.");this._entityCluster=e}},credit:{get:function(){return this._credit}}}),fe.prototype.load=function(e,t){return Ze(this,e,t,!0)},fe.prototype.process=function(e,t){return Ze(this,e,t,!1)},fe.prototype.update=function(e){return!0};var pe=fe}}]);
//# sourceMappingURL=1289.b084dec3.js.map