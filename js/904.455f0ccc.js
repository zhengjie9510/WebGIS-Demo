"use strict";(self["webpackChunkwebgis"]=self["webpackChunkwebgis"]||[]).push([[904],{30904:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});var a=n(73396);const r=e=>((0,a.dD)("data-v-31a84ab0"),e=e(),(0,a.Cn)(),e),o={class:"container"},i=r((()=>(0,a._)("canvas",{id:"c"},null,-1))),s=[i];function c(e,t,n,r,i,c){return(0,a.wg)(),(0,a.iD)("div",o,s)}var l=n(11114),d=n(84543);class h{constructor(e=512,t=512){const n=document.createElement("canvas");n.width=e,n.height=t;const a=n.getContext("2d");a.fillStyle="rgb(127,127,255)",a.fillRect(0,0,e,t);for(let r=0;r<4e3;r++){const n=Math.random()*e,r=Math.random()*t,o=3*Math.random()+3;let i=2*Math.random()-1,s=2*Math.random()-1,c=1.5;const l=Math.sqrt(i*i+s*s+c*c);i/=l,s/=l,c/=l,a.fillStyle="rgb("+(127*i+127)+","+(127*s+127)+","+255*c+")",a.beginPath(),a.arc(n,r,o,0,2*Math.PI),a.fill()}return n}}n(63408),n(14590);class u extends l.yxD{constructor(e){super(e),this.type=l.cLu}parse(e){const t=-1,n=1,a=2,r=3,o=4,i=function(e,i){switch(e){case n:console.error("THREE.RGBELoader Read Error: "+(i||""));break;case a:console.error("THREE.RGBELoader Write Error: "+(i||""));break;case r:console.error("THREE.RGBELoader Bad File Format: "+(i||""));break;default:case o:console.error("THREE.RGBELoader: Error: "+(i||""))}return t},s=1,c=2,d=4,h="\n",u=function(e,t,n){const a=128;t=t||1024;let r=e.pos,o=-1,i=0,s="",c=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+a)));while(0>(o=c.indexOf(h))&&i<t&&r<e.byteLength)s+=c,i+=c.length,r+=a,c+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+a)));return-1<o&&(!1!==n&&(e.pos+=i+o+1),s+c.slice(0,o))},p=function(e){const t=/^#\?(\S+)/,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,l=/^\s*FORMAT=(\S+)\s*$/,h=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,p={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let m,f;if(e.pos>=e.byteLength||!(m=u(e)))return i(n,"no header found");if(!(f=m.match(t)))return i(r,"bad initial token");p.valid|=s,p.programtype=f[1],p.string+=m+"\n";while(1){if(m=u(e),!1===m)break;if(p.string+=m+"\n","#"!==m.charAt(0)){if((f=m.match(a))&&(p.gamma=parseFloat(f[1],10)),(f=m.match(o))&&(p.exposure=parseFloat(f[1],10)),(f=m.match(l))&&(p.valid|=c,p.format=f[1]),(f=m.match(h))&&(p.valid|=d,p.height=parseInt(f[1],10),p.width=parseInt(f[2],10)),p.valid&c&&p.valid&d)break}else p.comments+=m+"\n"}return p.valid&c?p.valid&d?p:i(r,"missing image size specifier"):i(r,"missing format specifier")},m=function(e,t,a){const s=t;if(s<8||s>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(s!==(e[2]<<8|e[3]))return i(r,"wrong scanline width");const c=new Uint8Array(4*t*a);if(!c.length)return i(o,"unable to allocate buffer space");let l=0,d=0;const h=4*s,u=new Uint8Array(4),p=new Uint8Array(h);let m=a;while(m>0&&d<e.byteLength){if(d+4>e.byteLength)return i(n);if(u[0]=e[d++],u[1]=e[d++],u[2]=e[d++],u[3]=e[d++],2!=u[0]||2!=u[1]||(u[2]<<8|u[3])!=s)return i(r,"bad rgbe scanline format");let t,a=0;while(a<h&&d<e.byteLength){t=e[d++];const n=t>128;if(n&&(t-=128),0===t||a+t>h)return i(r,"bad scanline data");if(n){const n=e[d++];for(let e=0;e<t;e++)p[a++]=n}else p.set(e.subarray(d,d+t),a),a+=t,d+=t}const o=s;for(let e=0;e<o;e++){let t=0;c[l]=p[e+t],t+=s,c[l+1]=p[e+t],t+=s,c[l+2]=p[e+t],t+=s,c[l+3]=p[e+t],l+=4}m--}return c},f=function(e,t,n,a){const r=e[t+3],o=Math.pow(2,r-128)/255;n[a+0]=e[t+0]*o,n[a+1]=e[t+1]*o,n[a+2]=e[t+2]*o,n[a+3]=1},g=function(e,t,n,a){const r=e[t+3],o=Math.pow(2,r-128)/255;n[a+0]=l.A5E.toHalfFloat(Math.min(e[t+0]*o,65504)),n[a+1]=l.A5E.toHalfFloat(Math.min(e[t+1]*o,65504)),n[a+2]=l.A5E.toHalfFloat(Math.min(e[t+2]*o,65504)),n[a+3]=l.A5E.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const b=p(w);if(t!==b){const e=b.width,n=b.height,a=m(w.subarray(w.pos),e,n);if(t!==a){let t,r,o,i;switch(this.type){case l.VzW:i=a.length/4;const e=new Float32Array(4*i);for(let t=0;t<i;t++)f(a,4*t,e,4*t);t=e,o=l.VzW;break;case l.cLu:i=a.length/4;const n=new Uint16Array(4*i);for(let t=0;t<i;t++)g(a,4*t,n,4*t);t=n,o=l.cLu;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:e,height:n,data:t,header:b.string,gamma:b.gamma,exposure:b.exposure,format:r,type:o}}}return null}setDataType(e){return this.type=e,this}load(e,t,n,a){function r(e,n){switch(e.type){case l.VzW:e.encoding=l.rnI,e.minFilter=l.wem,e.magFilter=l.wem,e.generateMipmaps=!1,e.flipY=!0;break;case l.cLu:e.encoding=l.rnI,e.minFilter=l.wem,e.magFilter=l.wem,e.generateMipmaps=!1,e.flipY=!0;break}t&&t(e,n)}return super.load(e,r,n,a)}}var p={mounted(){this.init()},methods:{init(){const e=document.querySelector("#c"),t=new l.xsS,n=new l.cPb(45,e.clientWidth/e.clientHeight,.1,1e4);n.position.z=500,t.add(n);const a=new l.CP7({canvas:e,antialias:!0});a.setSize(e.innerWidth,e.innerHeight),a.setPixelRatio(window.devicePixelRatio),a.outputEncoding=l.knz;const r=new d.z(n,a.domElement),o=new l.ROQ(new h);o.wrapS=l.rpg,o.wrapT=l.rpg,o.repeat.x=10,o.repeat.y=6;const i=new l.anP(a);function s(){if(c(a)){const e=a.domElement;n.aspect=e.clientWidth/e.clientHeight,n.updateProjectionMatrix()}r.update(),a.render(t,n),requestAnimationFrame(s)}function c(e){const t=e.domElement,n=t.clientWidth,a=t.clientHeight,r=t.width!==n||t.height!==a;return r&&e.setSize(n,a,!1),r}(new u).setPath("./SampleData/").load("garden_nook_2k.hdr",(function(e){const n=i.fromCubemap(e),a={clearcoat:1,cleacoatRoughness:.1,metalness:.9,roughness:.5,color:8657098,normalMap:o,normalScale:new l.FM8(.15,.15),envMap:n.texture};e.mapping=l.dSO,t.background=e;const r=new l.xo$(100,64,64),s=new l.EJi(a),c=new l.Kj0(r,s);t.add(c);const d=new l.cek(15198183,2.5,250,0);d.position.y=60,t.add(d);const h=new l.cek(65280,.5,1e3,0);h.position.set(550,50,0),t.add(h);const u=new l.cek(16711680,.5,1e3,0);u.position.set(-550,50,0),t.add(u);const p=new l.cek(12303358,.5,1e3,0);p.position.set(0,50,550),t.add(p)})),s()}}},m=n(40089);const f=(0,m.Z)(p,[["render",c],["__scopeId","data-v-31a84ab0"]]);var g=f}}]);
//# sourceMappingURL=904.455f0ccc.js.map