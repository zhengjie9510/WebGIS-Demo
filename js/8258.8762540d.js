"use strict";(self["webpackChunkwebgis"]=self["webpackChunkwebgis"]||[]).push([[8258],{8258:function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var s=i(73396);const n={id:"cesiumContainer"};function a(e,t,i,a,o,h){return(0,s.wg)(),(0,s.iD)("div",n)}i(57658);var o=i(51119),h=i(28807),c=i(51625),r=i(74683),d=i(32882),p=i(69530),l=i(31724),u=i(2249),v=i(33350),P=i(86675),S=i(40985);class w{constructor(e){this.layer=new o.Z("MyLines"),this.activeShapePoints=[],this.activeShape=void 0,this.handler=void 0}bindAction(e){this.handler||(this.handler=new h.Z(e.scene.canvas)),this.handler.setInputAction((t=>{const i=this.getPosition(e,t.position);if(c.Z(i)){if(0===this.activeShapePoints.length){this.activeShapePoints.push(i);const e=new r.Z((()=>new d.Z(this.activeShapePoints)),!1);this.activeShape=this.drawPolygon(e)}this.activeShapePoints.push(i)}}),p.Z.LEFT_CLICK),this.handler.setInputAction((t=>{if(this.activeShapePoints.length>=2){const i=this.getPosition(e,t.endPosition);c.Z(i)&&(this.activeShapePoints.pop(),this.activeShapePoints.push(i))}}),p.Z.MOUSE_MOVE),this.handler.setInputAction((e=>{this.activeShapePoints.pop(),this.layer.entities.remove(this.activeShape),this.drawPolygon(this.activeShapePoints),this.activeShapePoints=[]}),p.Z.RIGHT_CLICK)}getPosition(e,t){let i;if(e.terrainProvider instanceof l.Z)i=e.scene.camera.pickEllipsoid(t);else{const s=e.camera.getPickRay(t);i=e.scene.globe.pick(s,e.scene)}return i}drawPolygon(e){return this.layer.entities.add({polygon:{hierarchy:e,material:new u.Z(v.Z.WHITE.withAlpha(.7))}})}addToMap(e){e.dataSources.add(this.layer)}}var g={mounted(){this.init()},methods:{init(){const e=new P.Z("cesiumContainer");S.Z.supportsImageRenderingPixelated()&&(e.resolutionScale=window.devicePixelRatio),e.scene.postProcessStages.fxaa.enabled=!0,e.scene.debugShowFramesPerSecond=!0;const t=new w;t.bindAction(e),t.addToMap(e)}}},Z=i(40089);const f=(0,Z.Z)(g,[["render",a],["__scopeId","data-v-29f61b6e"]]);var y=f}}]);
//# sourceMappingURL=8258.8762540d.js.map