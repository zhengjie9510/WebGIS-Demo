{"version":3,"file":"js/375.31a8e4f3.js","mappings":"+KACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,yGAOF,MAAMC,EACJC,YAAYC,GACVC,KAAKC,mBAAqB,IAAIC,EAAAA,EAC9BF,KAAKG,YAASC,EACdJ,KAAKK,YAASD,EACdJ,KAAKM,MAAQP,EAAQO,MACrBN,KAAKO,MAAQR,EAAQQ,KAEvB,CACIC,iBACF,OAAO,CACT,CAEIC,wBACF,OAAOT,KAAKC,kBACd,CAEAS,QAAQC,GACN,OAAOT,EAAAA,EAAAA,6BACT,CAEAU,SAASD,EAAME,GAMb,OALKX,EAAAA,EAAeW,KAClBA,EAAS,CAAC,GAEZA,EAAOP,MAAQJ,EAAAA,EAAAA,kBAAkCF,KAAKG,OAAQQ,EAAMT,EAAAA,EAAAA,IAAkBW,EAAOP,OAC7FO,EAAON,MAAQL,EAAAA,EAAAA,kBAAkCF,KAAKK,OAAQM,EAAM,GAAIE,EAAON,OACxEM,CACT,CAEAC,OAAOC,GACL,OAAQf,OAASe,GACdA,aAAiBlB,GAChBK,EAAAA,EAAAA,OAAuBF,KAAKG,OAAQY,EAAMZ,SAC1CD,EAAAA,EAAAA,OAAuBF,KAAKK,OAAQU,EAAMV,OAChD,EAEFW,OAAOC,iBAAiBpB,EAAkCqB,UAAW,CACnEZ,MAAOJ,EAAAA,EAAgC,SACvCK,MAAOL,EAAAA,EAAgC,WAEzCA,EAAOL,kCAAoCA,EAC3CK,EAAAA,EAAAA,8BAAgD,gCAChDA,EAAAA,EAAAA,gCACE,06DA+EFA,EAAAA,EAAAA,eAAAA,YAA2CA,EAAAA,EAAAA,8BAA+C,CACxFiB,OAAQ,CACNC,KAAMlB,EAAAA,EAAAA,8BACNmB,SAAU,CACRf,MAAO,IAAIJ,EAAAA,EAAa,EAAK,EAAK,EAAK,GACvCK,MAAO,IAETe,OAAQpB,EAAAA,EAAAA,iCAGVqB,YAAa,SAAUC,GACrB,OAAO,CACT,IAGF,OACEC,UACEzB,KAAK0B,MACP,EACAC,QAAS,CACPD,OACE,IAAIE,EAAS,IAAI1B,EAAAA,EAAc,mBAC3BA,EAAAA,EAAAA,oCACF0B,EAAOC,gBAAkBC,OAAOC,kBAElCH,EAAOI,MAAMC,kBAAkBC,KAAKC,SAAU,EAE9C,MAAMC,EAASR,EAAOS,SAASC,IAAI,CACjCC,SAAUrC,EAAAA,EAAAA,aAA+B,SAAU,QACnDsC,KAAM,OACNC,UAAW,CACTC,MAAO,IAAIxC,EAAAA,EAAkB,IAAO,IAAO,KAC3CsB,SAAU,IAAItB,EAAOL,kCAAkC,CACrDS,MAAO,IAAIJ,EAAAA,EAAa,EAAK,GAAK,EAAK,GACvCK,MAAO,QAIbqB,EAAOe,OAAOP,EAChB,I,QCnKJ,MAAMQ,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/public/ellipsoid_electric.vue","webpack://webgis/./src/components/public/ellipsoid_electric.vue?0e81"],"sourcesContent":["<template>\r\n  <div id=\"cesiumContainer\"></div>\r\n</template>\r\n\r\n<script>\r\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\r\nimport * as Cesium from 'cesium'\r\n\r\nclass EllipsoidElectricMaterialProperty {\r\n  constructor(options) {\r\n    this._definitionChanged = new Cesium.Event();\r\n    this._color = undefined;\r\n    this._speed = undefined;\r\n    this.color = options.color;\r\n    this.speed = options.speed;\r\n\r\n  }\r\n  get isConstant() {\r\n    return false;\r\n  }\r\n\r\n  get definitionChanged() {\r\n    return this._definitionChanged;\r\n  }\r\n  // eslint-disable-next-line\r\n  getType(time) {\r\n    return Cesium.Material.EllipsoidElectricMaterialType;\r\n  }\r\n\r\n  getValue(time, result) {\r\n    if (!Cesium.defined(result)) {\r\n      result = {};\r\n    }\r\n    result.color = Cesium.Property.getValueOrDefault(this._color, time, Cesium.Color.RED, result.color);\r\n    result.speed = Cesium.Property.getValueOrDefault(this._speed, time, 10, result.speed);\r\n    return result;\r\n  }\r\n\r\n  equals(other) {\r\n    return (this === other ||\r\n      (other instanceof EllipsoidElectricMaterialProperty &&\r\n        Cesium.Property.equals(this._color, other._color) &&\r\n        Cesium.Property.equals(this._speed, other._speed)))\r\n  }\r\n}\r\nObject.defineProperties(EllipsoidElectricMaterialProperty.prototype, {\r\n  color: Cesium.createPropertyDescriptor('color'),\r\n  speed: Cesium.createPropertyDescriptor('speed')\r\n})\r\nCesium.EllipsoidElectricMaterialProperty = EllipsoidElectricMaterialProperty\r\nCesium.Material.EllipsoidElectricMaterialType = 'EllipsoidElectricMaterialType';\r\nCesium.Material.EllipsoidElectricMaterialSource =\r\n  `\r\n\tuniform vec4 color;\r\n\tuniform float speed;\r\n\t\r\n\t#define pi 3.1415926535\r\n\t#define PI2RAD 0.01745329252\r\n\t#define TWO_PI (2. * PI)\r\n\t\r\n\tfloat rands(float p){\r\n    return fract(sin(p) * 10000.0);\r\n\t}\r\n\t\r\n\tfloat noise(vec2 p){\r\n    float time = fract( czm_frameNumber * speed / 1000.0);\r\n    float t = time / 20000.0;\r\n    if(t > 1.0) t -= floor(t);\r\n    return rands(p.x * 14. + p.y * sin(t) * 0.5);\r\n\t}\r\n\t\r\n\tvec2 sw(vec2 p){\r\n    return vec2(floor(p.x), floor(p.y));\r\n\t}\r\n\t\r\n\tvec2 se(vec2 p){\r\n    return vec2(ceil(p.x), floor(p.y));\r\n\t}\r\n\t\r\n\tvec2 nw(vec2 p){\r\n\treturn vec2(floor(p.x), ceil(p.y));\r\n\t}\r\n\t\r\n\tvec2 ne(vec2 p){\r\n    return vec2(ceil(p.x), ceil(p.y));\r\n\t}\r\n\t\r\n\tfloat smoothNoise(vec2 p){\r\n    vec2 inter = smoothstep(0.0, 1.0, fract(p));\r\n    float s = mix(noise(sw(p)), noise(se(p)), inter.x);\r\n    float n = mix(noise(nw(p)), noise(ne(p)), inter.x);\r\n    return mix(s, n, inter.y);\r\n\t}\r\n\t\r\n\tfloat fbm(vec2 p){\r\n    float z = 2.0;\r\n    float rz = 0.0;\r\n    vec2 bp = p;\r\n    for(float i = 1.0; i < 6.0; i++){\r\n      rz += abs((smoothNoise(p) - 0.5)* 2.0) / z;\r\n      z *= 2.0;\r\n      p *= 2.0;\r\n    }\r\n    return rz;\r\n\t}\r\n\t\r\n\tczm_material czm_getMaterial(czm_materialInput materialInput){\r\n    czm_material material = czm_getDefaultMaterial(materialInput);\r\n    vec2 st = materialInput.st;\r\n    vec2 st2 = materialInput.st;\r\n    float time = fract( czm_frameNumber * speed / 1000.0);\r\n    if (st.t < 0.5) {\r\n      discard;\r\n    }\r\n    st *= 4.;\r\n    float rz = fbm(st);\r\n    st /= exp(mod( time * 2.0, pi));\r\n    rz *= pow(15., 0.9);\r\n    vec4 temp = vec4(0);\r\n    temp = mix( color / rz, vec4(color.rgb, 0.1), 0.2);\r\n    if (st2.s < 0.05) {\r\n      temp = mix(vec4(color.rgb, 0.1), temp, st2.s / 0.05);\r\n    }\r\n    if (st2.s > 0.95){\r\n      temp = mix(temp, vec4(color.rgb, 0.1), (st2.s - 0.95) / 0.05);\r\n    }\r\n    material.diffuse = temp.rgb;\r\n    material.alpha = temp.a * 2.0;\r\n    return material;\r\n\t}\r\n\t`\r\nCesium.Material._materialCache.addMaterial(Cesium.Material.EllipsoidElectricMaterialType, {\r\n  fabric: {\r\n    type: Cesium.Material.EllipsoidElectricMaterialType,\r\n    uniforms: {\r\n      color: new Cesium.Color(1.0, 1.0, 0.0, 1.0),\r\n      speed: 10.0\r\n    },\r\n    source: Cesium.Material.EllipsoidElectricMaterialSource\r\n  },\r\n  // eslint-disable-next-line\r\n  translucent: function (material) {\r\n    return true;\r\n  }\r\n})\r\n\r\nexport default {\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      var viewer = new Cesium.Viewer('cesiumContainer')\r\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\r\n        viewer.resolutionScale = window.devicePixelRatio\r\n      }\r\n      viewer.scene.postProcessStages.fxaa.enabled = true\r\n\r\n      const entity = viewer.entities.add({\r\n        position: Cesium.Cartesian3.fromDegrees(-122.4175, 37.655),\r\n        name: '电弧球体',\r\n        ellipsoid: {\r\n          radii: new Cesium.Cartesian3(100.0, 100.0, 100.0),\r\n          material: new Cesium.EllipsoidElectricMaterialProperty({\r\n            color: new Cesium.Color(1.0, 0.5, 0.0, 1.0),\r\n            speed: 10.0\r\n          })\r\n        }\r\n      })\r\n      viewer.zoomTo(entity)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#cesiumContainer {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./ellipsoid_electric.vue?vue&type=template&id=5284e0f1&scoped=true\"\nimport script from \"./ellipsoid_electric.vue?vue&type=script&lang=js\"\nexport * from \"./ellipsoid_electric.vue?vue&type=script&lang=js\"\n\nimport \"./ellipsoid_electric.vue?vue&type=style&index=0&id=5284e0f1&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Documents\\\\GitHub\\\\Z-Personal\\\\webgis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5284e0f1\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","EllipsoidElectricMaterialProperty","constructor","options","this","_definitionChanged","Cesium","_color","undefined","_speed","color","speed","isConstant","definitionChanged","getType","time","getValue","result","equals","other","Object","defineProperties","prototype","fabric","type","uniforms","source","translucent","material","mounted","init","methods","viewer","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","entity","entities","add","position","name","ellipsoid","radii","zoomTo","__exports__","render"],"sourceRoot":""}