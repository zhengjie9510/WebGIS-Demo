{"version":3,"file":"js/6297.51cc8164.js","mappings":"kLACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,mHAMF,MAAMC,EAAaC,EAAQ,OAE3B,OACEC,UACEC,KAAKC,MACP,EACAC,QAAS,CACPD,OACE,IAAIE,EAAS,IAAIC,EAAAA,EAAc,kBAAmB,CAChDC,gBAAiB,IAAID,EAAAA,EAAkC,CACrDE,IAAK,6DACLC,WAAY,CAAC,IAAK,IAAK,IAAK,SAG5BH,EAAAA,EAAAA,oCAEFD,EAAOK,gBAAkBC,OAAOC,kBAElCP,EAAOQ,MAAMC,kBAAkBC,KAAKC,SAAU,EAE9C,IAAK,MAAMC,KAAWlB,EAAWmB,SAAU,CACzC,MAAMC,EAAcF,EAAQG,SAASD,YAErC,IAAIC,EAAW,IAAId,EAAAA,EAAwB,CACzCe,UAAWf,EAAAA,EAAAA,iBAAmCa,EAAYG,KAAK,IAC/DC,MAAO,KAGT,MAAMC,EAAW,IAAIlB,EAAAA,EAAwB,CAC3Cc,SAAUA,IAENK,EAAa,IAAInB,EAAAA,EAAiB,CACtCoB,kBAAmBF,EACnBG,WAAY,IAAIrB,EAAAA,EAAkC,CAChDsB,SAAU,IAAItB,EAAAA,EAAgB,CAC5BuB,OAAQ,CACNC,KAAM,gBACNC,SAAU,CACRC,MAAO,IAAI1B,EAAAA,EAAa,GAAK,GAAK,GAAK,GACvC2B,UAAW,IACXC,WAAY,GAEdC,OAAQ,0iCA4BdC,cAAc,IAEhB/B,EAAOQ,MAAMwB,WAAWC,IAAIb,GAE5BL,EAAWd,EAAAA,EAAAA,eAAuCc,GAClDf,EAAOkC,OAAOC,oBAAoBpB,EAASqB,eAAgB,CAAEC,SAAU,GACzE,CACF,I,WC7EJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/public/glow_border.vue","webpack://webgis/./src/components/public/glow_border.vue?0f38"],"sourcesContent":["<template>\n  <div id=\"cesiumContainer\"></div>\n</template>\n\n<script>\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\nimport * as Cesium from 'cesium'\nconst borderJson = require('../../../public/SampleData/sichuan.json')\n\nexport default {\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      var viewer = new Cesium.Viewer('cesiumContainer', {\n        imageryProvider: new Cesium.UrlTemplateImageryProvider({\n          url: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png\",\n          subdomains: [\"a\", \"b\", \"c\", \"d\"],\n        })\n      })\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\n        //判断是否支持图像渲染像素化处理\n        viewer.resolutionScale = window.devicePixelRatio\n      }\n      viewer.scene.postProcessStages.fxaa.enabled = true\n\n      for (const feature of borderJson.features) {\n        const coordinates = feature.geometry.coordinates\n\n        let geometry = new Cesium.PolylineGeometry({\n          positions: Cesium.Cartesian3.fromDegreesArray(coordinates.flat(2)),\n          width: 10.0\n        })\n\n        const instance = new Cesium.GeometryInstance({\n          geometry: geometry\n        })\n        const glowBorder = new Cesium.Primitive({\n          geometryInstances: instance,\n          appearance: new Cesium.PolylineMaterialAppearance({\n            material: new Cesium.Material({\n              fabric: {\n                type: 'MyBorderColor',\n                uniforms: {\n                  color: new Cesium.Color(0.8, 0.2, 0.5, 1.0),\n                  glowPower: 0.25,\n                  taperPower: 1\n                },\n                source: `\n                  uniform vec4 color;\n                  uniform float glowPower;\n                  uniform float taperPower;\n                  czm_material czm_getMaterial(czm_materialInput materialInput)\n                  {\n                    czm_material material = czm_getDefaultMaterial(materialInput);\n                    vec2 st = materialInput.st;\n                    float glow = glowPower / abs(st.t - 0.5) - (glowPower / 0.5);\n\n                    if (taperPower <= 0.99999) {\n                        glow *= min(1.0, taperPower / (0.5 - st.s * 0.5) - (taperPower / 0.5));\n                    }\n\n                    vec4 fragColor;\n                    fragColor.rgb = max(vec3(glow - 1.0 + color.rgb), color.rgb);\n                    fragColor.a = clamp(0.0, 1.0, glow) * color.a;\n                    fragColor = czm_gammaCorrect(fragColor);\n\n                    material.emission = fragColor.rgb;\n                    material.alpha = fragColor.a;\n\n                    return material;\n                  }\n                `\n              }\n            })\n          }),\n          allowPicking: false\n        })\n        viewer.scene.primitives.add(glowBorder)\n\n        geometry = Cesium.PolylineGeometry.createGeometry(geometry)\n        viewer.camera.flyToBoundingSphere(geometry.boundingSphere, { duration: 0 })\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#cesiumContainer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import { render } from \"./glow_border.vue?vue&type=template&id=32a814b3&scoped=true\"\nimport script from \"./glow_border.vue?vue&type=script&lang=js\"\nexport * from \"./glow_border.vue?vue&type=script&lang=js\"\n\nimport \"./glow_border.vue?vue&type=style&index=0&id=32a814b3&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhengjie/Documents/webgis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-32a814b3\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","borderJson","require","mounted","this","init","methods","viewer","Cesium","imageryProvider","url","subdomains","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","feature","features","coordinates","geometry","positions","flat","width","instance","glowBorder","geometryInstances","appearance","material","fabric","type","uniforms","color","glowPower","taperPower","source","allowPicking","primitives","add","camera","flyToBoundingSphere","boundingSphere","duration","__exports__","render"],"sourceRoot":""}