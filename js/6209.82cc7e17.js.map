{"version":3,"file":"js/6209.82cc7e17.js","mappings":"kLACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,2JAOF,GACEC,UACEC,KAAKC,MACP,EACAC,QAAS,CACPC,aACE,MAAMC,EAAS,IAAIC,EAAAA,EAAc,kBAAmB,CAAEC,sBAAuBD,EAAAA,MACzEA,EAAAA,EAAAA,oCAEFD,EAAOG,gBAAkBC,OAAOC,kBAElCL,EAAOM,MAAMC,kBAAkBC,KAAKC,SAAU,EAC9CT,EAAOM,MAAMI,MAAMC,yBAA0B,EAC7CX,EAAOM,MAAMM,0BAA2B,EAGxC,MAAMC,GAASC,EAAAA,EAAAA,KAAY,IAAK,CAAEC,KAAM,CAAC,IAAK,GAAI,IAAK,MAEjDC,EAAY,GAClB,IAAK,IAAIC,KAASJ,EAAOK,SAAU,CACjC,MAAMC,EAAcF,EAAMG,SAASD,YAC7BE,EAAWpB,EAAAA,EAAAA,YAAgCkB,EAAY,GAAIA,EAAY,IAC7EH,EAAUM,KAAKD,EACjB,CAEA,MAAME,EAAa,IAAItB,EAAAA,EACjBuB,EAAa,IAAIvB,EAAAA,EACjBC,EAAkBF,EAAOE,gBACzBuB,EAAUxB,EAAAA,EAAiCC,EAAiBc,GAClEU,QAAQC,QAAQF,GAASG,MAAK,SAAUC,GACtC,IAAK,IAAIR,KAAYQ,EACnBL,EAAWM,IAAI,CACbT,SAAUpB,EAAAA,EAAAA,YAA8BoB,EAASU,UAAWV,EAASW,SAAUX,EAASY,QACxFC,MAAOX,EAAWY,UAAUlC,EAAAA,EAAAA,WAAwB,CAAEmC,MAAO,IAAQ,IAAIC,YACzEC,eAAgBrC,EAAAA,EAAAA,OAChBsC,iBAAkBtC,EAAAA,EAAAA,SAGtBD,EAAOM,MAAMkC,WAAWV,IAAIN,EAC9B,IAEA,MAAMiB,EAASxC,EAAAA,EAAAA,YAA8B,IAAK,IAClDD,EAAO0C,OAAOC,OAAOF,EAAQ,IAAIxC,EAAAA,EAAkB,GAAM,IAAS,OAClED,EAAO0C,OAAOE,gBAAgB3C,EAAAA,EAAAA,SAChC,I,WC7CJ,MAAM4C,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/public/grounded_billboard.vue","webpack://webgis/./src/components/public/grounded_billboard.vue?05e3"],"sourcesContent":["<template>\n  <div id=\"cesiumContainer\"></div>\n</template>\n\n<script>\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\nimport * as Cesium from 'cesium'\nimport { randomPoint } from '@turf/turf'\nexport default {\n  mounted() {\n    this.init()\n  },\n  methods: {\n    async init() {\n      const viewer = new Cesium.Viewer('cesiumContainer', { terrainProvider: await Cesium.createWorldTerrainAsync() })\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\n        //判断是否支持图像渲染像素化处理\n        viewer.resolutionScale = window.devicePixelRatio\n      }\n      viewer.scene.postProcessStages.fxaa.enabled = true\n      viewer.scene.globe.depthTestAgainstTerrain = true\n      viewer.scene.debugShowFramesPerSecond = true // 显示帧率\n\n      // 1、生成大量随机点\n      const points = randomPoint(500, { bbox: [100, 25, 102, 27] })\n      // 2、Cartographic数组\n      const positions = []\n      for (let point of points.features) {\n        const coordinates = point.geometry.coordinates\n        const position = Cesium.Cartographic.fromDegrees(coordinates[0], coordinates[1])\n        positions.push(position)\n      }\n      // 3、高程采样\n      const pinBuilder = new Cesium.PinBuilder();\n      const collection = new Cesium.BillboardCollection()\n      const terrainProvider = viewer.terrainProvider\n      const promise = Cesium.sampleTerrainMostDetailed(terrainProvider, positions);\n      Promise.resolve(promise).then(function (updatedPositions) {\n        for (let position of updatedPositions) {\n          collection.add({\n            position: Cesium.Cartesian3.fromRadians(position.longitude, position.latitude, position.height),\n            image: pinBuilder.fromColor(Cesium.Color.fromRandom({ alpha: 1.0 }), 20).toDataURL(),\n            verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n            horizontalOrigin: Cesium.HorizontalOrigin.CENTER,\n          })\n        }\n        viewer.scene.primitives.add(collection)\n      });\n\n      const center = Cesium.Cartesian3.fromDegrees(101, 26);\n      viewer.camera.lookAt(center, new Cesium.Cartesian3(0.0, -10000.0, 3930.0));\n      viewer.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#cesiumContainer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import { render } from \"./grounded_billboard.vue?vue&type=template&id=705b329c&scoped=true\"\nimport script from \"./grounded_billboard.vue?vue&type=script&lang=js\"\nexport * from \"./grounded_billboard.vue?vue&type=script&lang=js\"\n\nimport \"./grounded_billboard.vue?vue&type=style&index=0&id=705b329c&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhengjie/Documents/webgis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-705b329c\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","mounted","this","init","methods","async","viewer","Cesium","terrainProvider","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","globe","depthTestAgainstTerrain","debugShowFramesPerSecond","points","randomPoint","bbox","positions","point","features","coordinates","geometry","position","push","pinBuilder","collection","promise","Promise","resolve","then","updatedPositions","add","longitude","latitude","height","image","fromColor","alpha","toDataURL","verticalOrigin","horizontalOrigin","primitives","center","camera","lookAt","lookAtTransform","__exports__","render"],"sourceRoot":""}