{"version":3,"file":"js/7338.678f810a.js","mappings":"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","sources":["webpack://webgis/./src/components/public/custom_geometry.vue","webpack://webgis/./src/components/public/custom_geometry.vue?7338"],"sourcesContent":["<template>\n  <div id=\"cesiumContainer\"></div>\n</template>\n\n<script>\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\nimport {\n  Viewer,\n  FeatureDetection,\n  Cartesian3,\n  GeometryInstance,\n  Primitive,\n  BlendingState,\n  GeometryAttributes,\n  PrimitiveType,\n  GeometryAttribute,\n  Transforms,\n  ComponentDatatype,\n  Geometry,\n  BoundingSphere,\n  Appearance,\n  Matrix4,\n  Math as CesiumMath\n} from 'cesium'\nexport default {\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      var viewer = new Viewer('cesiumContainer')\n      if (FeatureDetection.supportsImageRenderingPixelated()) {\n        //判断是否支持图像渲染像素化处理\n        viewer.resolutionScale = window.devicePixelRatio\n      }\n      viewer.scene.postProcessStages.fxaa.enabled = true\n      var scene = viewer.scene\n\n      // Create a cube\n      //    v6----- v5\n      //   /|      /|\n      //  v1------v0|\n      //  | |     | |\n      //  | |v7---|-|v4\n      //  |/      |/\n      //  v2------v3\n      var vertices = new Float32Array([\n        // Vertex coordinates\n        1.0, 1.0, 1.0, -1.0, 1.0, 1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, // v0-v1-v2-v3 front\n        1.0, 1.0, 1.0, 1.0, -1.0, 1.0, 1.0, -1.0, -1.0, 1.0, 1.0, -1.0, // v0-v3-v4-v5 right\n        1.0, 1.0, 1.0, 1.0, 1.0, -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, // v0-v5-v6-v1 up\n        -1.0, 1.0, 1.0, -1.0, 1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, 1.0, // v1-v6-v7-v2 left\n        -1.0, -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0, -1.0, -1.0, 1.0, // v7-v4-v3-v2 down\n        1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, // v4-v7-v6-v5 back\n      ])\n\n      var colors = new Float32Array([\n        // Colors\n        0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, // v0-v1-v2-v3 front(blue)\n        0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, // v0-v3-v4-v5 right(green)\n        1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, // v0-v5-v6-v1 up(red)\n        1.0, 1.0, 0.4, 1.0, 1.0, 0.4, 1.0, 1.0, 0.4, 1.0, 1.0, 0.4, // v1-v6-v7-v2 left\n        1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, // v7-v4-v3-v2 down\n        0.4, 1.0, 1.0, 0.4, 1.0, 1.0, 0.4, 1.0, 1.0, 0.4, 1.0, 1.0, // v4-v7-v6-v5 back\n      ])\n\n      var attributes = new GeometryAttributes({\n        position: new GeometryAttribute({\n          componentDatatype: ComponentDatatype.DOUBLE,\n          componentsPerAttribute: 3,\n          values: vertices,\n        }),\n        color: new GeometryAttribute({\n          componentDatatype: ComponentDatatype.FLOAT,\n          componentsPerAttribute: 3,\n          values: colors,\n        }),\n      })\n\n      var indices = new Uint8Array([\n        // Indices of the vertices\n        0, 1, 2, 0, 2, 3, // front\n        4, 5, 6, 4, 6, 7, // right\n        8, 9, 10, 8, 10, 11, // up\n        12, 13, 14, 12, 14, 15, // left\n        16, 17, 18, 16, 18, 19, // down\n        20, 21, 22, 20, 22, 23, // back\n      ])\n\n      //包围球\n      var boundingSphere = new BoundingSphere(\n        new Cartesian3(0.0, 0.0, 0.0),\n        2.0\n      )\n\n      var geometry = new Geometry({\n        attributes: attributes,\n        indices: indices,\n        primitiveType: PrimitiveType.TRIANGLES,\n        boundingSphere: boundingSphere,\n      })\n\n      //模型矩阵\n      var modelMatrix = Matrix4.multiplyByUniformScale(\n        Matrix4.multiplyByTranslation(\n          Transforms.eastNorthUpToFixedFrame(\n            Cartesian3.fromDegrees(116.23, 39.54)\n          ),\n          new Cartesian3(0.0, 0.0, 25),\n          new Matrix4()\n        ),\n        25.0,\n        new Matrix4()\n      )\n      //四面体的实例\n      var instance = new GeometryInstance({\n        geometry: geometry,\n        modelMatrix: modelMatrix,\n      })\n      function v_shader() {\n        return `\n          in vec3 position3DHigh;\n          in vec3 position3DLow;\n          in float batchId;\n          in vec4 color;\n          out vec4 v_color;\n          void main() {\n              vec4 position = czm_modelViewProjectionRelativeToEye *czm_computePosition();\n              v_color = color;\n              gl_Position = position;\n          }`\n      }\n      function f_shader() {\n        return `\n          in vec4 v_color;\n          void main() {\n              vec4 color = czm_gammaCorrect(v_color);\n              out_FragColor = color;\n          }`\n      }\n      let appearance = new Appearance({\n        translucent: false, //显示不为半透明\n        closed: true,\n        renderState: {\n          blending: BlendingState.PRE_MULTIPLIED_ALPHA_BLEND, //使用Alpha混合功能启用混合\n          depthTest: { enabled: true }, //深度检测\n          depthMask: true, //将深度值写入深度缓冲区\n        },\n        fragmentShaderSource: f_shader(), //片段着色器\n        vertexShaderSource: v_shader(), //顶点着色器\n      })\n      //加入场景\n      scene.primitives.add(\n        new Primitive({\n          geometryInstances: instance,\n          appearance: appearance,\n          asynchronous: false,\n        })\n      )\n      //\n      viewer.camera.flyTo({\n        destination: Cartesian3.fromDegrees(116.23, 39.54, 500),\n        orientation: {\n          heading: CesiumMath.toRadians(0),\n          pitch: CesiumMath.toRadians(-90),\n          roll: 0.0,\n        },\n      })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#cesiumContainer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import { render } from \"./custom_geometry.vue?vue&type=template&id=1997bc3d&scoped=true\"\nimport script from \"./custom_geometry.vue?vue&type=script&lang=js\"\nexport * from \"./custom_geometry.vue?vue&type=script&lang=js\"\n\nimport \"./custom_geometry.vue?vue&type=style&index=0&id=1997bc3d&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhengjie/Documents/webgis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1997bc3d\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","mounted","this","init","methods","viewer","Viewer","FeatureDetection","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","vertices","Float32Array","colors","attributes","GeometryAttributes","position","GeometryAttribute","componentDatatype","ComponentDatatype","componentsPerAttribute","values","color","indices","Uint8Array","boundingSphere","BoundingSphere","Cartesian3","geometry","Geometry","primitiveType","PrimitiveType","modelMatrix","Matrix4","Transforms","instance","GeometryInstance","v_shader","f_shader","appearance","Appearance","translucent","closed","renderState","blending","BlendingState","depthTest","depthMask","fragmentShaderSource","vertexShaderSource","primitives","add","Primitive","geometryInstances","asynchronous","camera","flyTo","destination","orientation","heading","CesiumMath","pitch","roll","__exports__","render"],"sourceRoot":""}