{"version":3,"file":"js/3379.c47c58d7.js","mappings":"kLACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,8HAOF,MAAMC,EACJC,YAAYC,GACVC,KAAKC,MAAQ,IAAIC,EAAAA,EAAwB,YACzCF,KAAKG,aAAUC,CACjB,CAKAC,WAAWC,GACJN,KAAKG,UACRH,KAAKG,QAAU,IAAID,EAAAA,EAA+BI,EAAOC,MAAMC,SAEjER,KAAKG,QAAQM,gBAAgBC,IAC3B,IAAIC,EAEJ,GAAIL,EAAOM,2BAA2BV,EAAAA,EACpCS,EAAgBL,EAAOC,MAAMM,OAAOC,cAAcJ,EAAMK,cAGrD,CACH,MAAMC,EAAMV,EAAOO,OAAOI,WAAWP,EAAMK,UAC3CJ,EAAgBL,EAAOC,MAAMW,MAAMC,KAAKH,EAAKV,EAAOC,MACtD,CACA,GAAIL,EAAAA,EAAeS,GAAgB,CACjC,MAAMS,EAASpB,KAAKqB,YAAYV,GAChCX,KAAKC,MAAMqB,SAASC,IAAIH,EAC1B,IACClB,EAAAA,EAAAA,WACL,CAMAmB,YAAYG,GACV,MAAMC,EAAQ,IAAIvB,EAAAA,EAAc,CAC9Ba,SAAUS,EACVC,MAAO,CACLC,MAAOxB,EAAAA,EAAAA,IACPyB,UAAW,EACXC,gBAAiB1B,EAAAA,EAAAA,mBAGrB,OAAOuB,CACT,CAKAI,SAASvB,GACPA,EAAOwB,YAAYP,IAAIvB,KAAKC,MAC9B,EAEF,OACE8B,UACE/B,KAAKgC,MACP,EACAC,QAAS,CACPD,OACE,MAAM1B,EAAS,IAAIJ,EAAAA,EAAc,kBAAmB,CAClDgC,gBAAiB,IAAIhC,EAAAA,EAAkC,CACrDiC,IAAK,6DACLC,WAAY,CAAC,IAAK,IAAK,IAAK,SAG5BlC,EAAAA,EAAAA,oCAEFI,EAAO+B,gBAAkBC,OAAOC,kBAElCjC,EAAOC,MAAMiC,kBAAkBC,KAAKC,SAAU,EAC9CpC,EAAOC,MAAMoC,0BAA2B,EAExC,MAAMC,EAAa,IAAI/C,EACvB+C,EAAWvC,WAAWC,GACtBsC,EAAWf,SAASvB,EACtB,I,WC7EJ,MAAMuC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/public/draw_point.vue","webpack://webgis/./src/components/public/draw_point.vue?d652"],"sourcesContent":["<template>\r\n  <div id=\"cesiumContainer\"></div>\r\n</template>\r\n\r\n<script>\r\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\r\nimport * as Cesium from 'cesium'\r\n\r\nclass DrawPoints {\r\n  constructor(options) {\r\n    this.layer = new Cesium.CustomDataSource('MyPoints')\r\n    this.handler = undefined\r\n  }\r\n  /**\r\n   * 添加鼠标点击事件\r\n   * @param {Cesium.Viewer} viewer 目标地图\r\n   */\r\n  bindAction(viewer) {\r\n    if (!this.handler) {\r\n      this.handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);\r\n    }\r\n    this.handler.setInputAction((click) => {\r\n      let earthPosition = undefined\r\n      // 球面\r\n      if (viewer.terrainProvider instanceof Cesium.EllipsoidTerrainProvider) {\r\n        earthPosition = viewer.scene.camera.pickEllipsoid(click.position);\r\n      }\r\n      // 地形\r\n      else {\r\n        const ray = viewer.camera.getPickRay(click.position);\r\n        earthPosition = viewer.scene.globe.pick(ray, viewer.scene);\r\n      }\r\n      if (Cesium.defined(earthPosition)) {\r\n        const entity = this.createPoint(earthPosition)\r\n        this.layer.entities.add(entity)\r\n      }\r\n    }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\r\n  }\r\n  /**\r\n   * 创建点\r\n   * @param {Cesium.Cartesian3} worldPosition A 3D Cartesian point.\r\n   * @return {Cesium.Entity} 点实体\r\n   */\r\n  createPoint(worldPosition) {\r\n    const point = new Cesium.Entity({\r\n      position: worldPosition,\r\n      point: {\r\n        color: Cesium.Color.RED,\r\n        pixelSize: 5,\r\n        heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\r\n      },\r\n    })\r\n    return point;\r\n  }\r\n  /**\r\n   * 添加图层\r\n   * @param {Cesium.Viewer} viewer 目标地图\r\n   */\r\n  addToMap(viewer) {\r\n    viewer.dataSources.add(this.layer);\r\n  }\r\n}\r\nexport default {\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      const viewer = new Cesium.Viewer('cesiumContainer', {\r\n        imageryProvider: new Cesium.UrlTemplateImageryProvider({\r\n          url: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png\",\r\n          subdomains: [\"a\", \"b\", \"c\", \"d\"],\r\n        })\r\n      })\r\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\r\n        //判断是否支持图像渲染像素化处理\r\n        viewer.resolutionScale = window.devicePixelRatio\r\n      }\r\n      viewer.scene.postProcessStages.fxaa.enabled = true\r\n      viewer.scene.debugShowFramesPerSecond = true // 显示帧率\r\n\r\n      const drawPoints = new DrawPoints()\r\n      drawPoints.bindAction(viewer)\r\n      drawPoints.addToMap(viewer)\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#cesiumContainer {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./draw_point.vue?vue&type=template&id=531d703a&scoped=true\"\nimport script from \"./draw_point.vue?vue&type=script&lang=js\"\nexport * from \"./draw_point.vue?vue&type=script&lang=js\"\n\nimport \"./draw_point.vue?vue&type=style&index=0&id=531d703a&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Documents\\\\GitHub\\\\webgis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-531d703a\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","DrawPoints","constructor","options","this","layer","Cesium","handler","undefined","bindAction","viewer","scene","canvas","setInputAction","click","earthPosition","terrainProvider","camera","pickEllipsoid","position","ray","getPickRay","globe","pick","entity","createPoint","entities","add","worldPosition","point","color","pixelSize","heightReference","addToMap","dataSources","mounted","init","methods","imageryProvider","url","subdomains","resolutionScale","window","devicePixelRatio","postProcessStages","fxaa","enabled","debugShowFramesPerSecond","drawPoints","__exports__","render"],"sourceRoot":""}