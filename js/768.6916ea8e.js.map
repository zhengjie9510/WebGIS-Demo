{"version":3,"file":"js/768.6916ea8e.js","mappings":"iLACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,2LAOF,GACEC,OACE,MAAO,CAAEC,KAAMC,gBACjB,EACAC,UACEC,KAAKC,MACP,EACAC,QAAS,CACPD,OACE,IAAIE,EAAS,IAAIC,EAAAA,EAAc,mBAC3BA,EAAAA,EAAAA,oCAEFD,EAAOE,gBAAkBC,OAAOC,kBAElCJ,EAAOK,MAAMC,kBAAkBC,KAAKC,SAAU,EAC9CR,EAAOK,MAAMI,0BAA2B,EAGxC,MAAMC,EAAoB,IAAIT,EAAAA,EAAwB,CACpDU,SAAU,IAAIV,EAAAA,EAAyB,CACrCW,UAAWX,EAAAA,EAAAA,aAA8B,IAAO,IAAO,IAAO,IAC9DY,aAAcZ,EAAAA,EAAAA,gBAEhBX,GAAI,YACJwB,WAAY,CACVC,MAAO,IAAId,EAAAA,EAAsC,EAAK,EAAK,EAAK,OAG9De,EAAoB,IAAIf,EAAAA,EAAwB,CACpDU,SAAU,IAAIV,EAAAA,EAAyB,CACrCgB,MAAO,IAAIhB,EAAAA,EAAkB,IAAU,IAAU,KACjDY,aAAcZ,EAAAA,EAAAA,sBAEhBiB,YAAajB,EAAAA,EAAAA,sBAAqCA,EAAAA,EAAAA,wBAChDA,EAAAA,EAAAA,aAA+B,SAAU,WAAY,IAAIA,EAAAA,EAAkB,EAAK,EAAK,KAAW,IAAIA,EAAAA,GACtGX,GAAI,YACJwB,WAAY,CACVC,MAAOd,EAAAA,EAAAA,UAAgDA,EAAAA,EAAAA,SAS3D,IAAIkB,EANJnB,EAAOK,MAAMe,WAAWC,IAAI,IAAIpB,EAAAA,EAAiB,CAC/CqB,kBAAmB,CAACZ,EAAmBM,GACvCO,WAAY,IAAItB,EAAAA,KAKlB,IAAIuB,EAAc,CAAEC,eAAWC,EAAWC,iBAAaD,EAAWpC,QAAIoC,GACjEP,IACHA,EAAU,IAAIlB,EAAAA,EAA+BD,EAAOK,MAAMuB,QAC1DT,EAAQU,gBAAgBC,IACtB,MAAMC,EAAa/B,EAAOK,MAAM2B,KAAKF,EAAMG,UAE3C,GAAIT,EAAYC,UAAW,CACzB,MAAMX,EAAaU,EAAYC,UAAUS,8BAA8BV,EAAYlC,IACnFwB,EAAWC,MAAQd,EAAAA,EAAAA,QAA8CuB,EAAYG,aAC7EH,EAAYC,eAAYC,EACxBF,EAAYG,iBAAcD,EAC1BF,EAAYlC,QAAKoC,CACnB,CAEA,GAAIzB,EAAAA,EAAe8B,IAAe/B,EAAOK,MAAMe,WAAWe,SAASJ,EAAWN,WAAY,CACxF,MAAMA,EAAYM,EAAWN,UACvBnC,EAAKyC,EAAWzC,GAChBwB,EAAaW,EAAUS,8BAA8B5C,GAE3DkC,EAAYC,UAAYA,EACxBD,EAAYG,YAAc1B,EAAAA,EAAAA,aAA0Ba,EAAWC,OAC/DS,EAAYlC,GAAKA,EAEjBwB,EAAWC,MAAQd,EAAAA,EAAAA,QAA8CA,EAAAA,EAAAA,IACnE,IACCA,EAAAA,EAAAA,YAEP,I,WC3EJ,MAAMmC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/public/select_hightlight_instance.vue","webpack://webgis/./src/components/public/select_hightlight_instance.vue?9d46"],"sourcesContent":["<template>\n  <div id=\"cesiumContainer\"></div>\n</template>\n\n<script>\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\nimport * as Cesium from 'cesium'\n\nexport default {\n  data() {\n    return { path: process.env.BASE_URL }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      var viewer = new Cesium.Viewer('cesiumContainer')\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\n        //判断是否支持图像渲染像素化处理\n        viewer.resolutionScale = window.devicePixelRatio\n      }\n      viewer.scene.postProcessStages.fxaa.enabled = true\n      viewer.scene.debugShowFramesPerSecond = true;\n\n      // Draw different instances each with a unique color\n      const rectangleInstance = new Cesium.GeometryInstance({\n        geometry: new Cesium.RectangleGeometry({\n          rectangle: Cesium.Rectangle.fromDegrees(-140.0, 30.0, -100.0, 40.0),\n          vertexFormat: Cesium.PerInstanceColorAppearance.VERTEX_FORMAT\n        }),\n        id: 'rectangle',\n        attributes: {\n          color: new Cesium.ColorGeometryInstanceAttribute(1.0, 1.0, 1.0, 0.5)\n        }\n      });\n      const ellipsoidInstance = new Cesium.GeometryInstance({\n        geometry: new Cesium.EllipsoidGeometry({\n          radii: new Cesium.Cartesian3(500000.0, 500000.0, 1000000.0),\n          vertexFormat: Cesium.VertexFormat.POSITION_AND_NORMAL\n        }),\n        modelMatrix: Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(\n          Cesium.Cartesian3.fromDegrees(-95.59777, 40.03883)), new Cesium.Cartesian3(0.0, 0.0, 500000.0), new Cesium.Matrix4()),\n        id: 'ellipsoid',\n        attributes: {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.AQUA)\n        }\n      });\n      viewer.scene.primitives.add(new Cesium.Primitive({\n        geometryInstances: [rectangleInstance, ellipsoidInstance],\n        appearance: new Cesium.PerInstanceColorAppearance()\n      }));\n\n      // 处理选中事件\n      let handler = undefined\n      let highlighted = { primitive: undefined, originColor: undefined, id: undefined } // 高亮\n      if (!handler) {\n        handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);\n        handler.setInputAction((click) => {\n          const pickobject = viewer.scene.pick(click.position)\n          // step1 恢复已高亮的primitie颜色\n          if (highlighted.primitive) {\n            const attributes = highlighted.primitive.getGeometryInstanceAttributes(highlighted.id)\n            attributes.color = Cesium.ColorGeometryInstanceAttribute.toValue(highlighted.originColor)\n            highlighted.primitive = undefined\n            highlighted.originColor = undefined\n            highlighted.id = undefined\n          }\n          // step2 对选中的primitive改变颜色\n          if (Cesium.defined(pickobject) && viewer.scene.primitives.contains(pickobject.primitive)) {\n            const primitive = pickobject.primitive\n            const id = pickobject.id\n            const attributes = primitive.getGeometryInstanceAttributes(id)\n\n            highlighted.primitive = primitive\n            highlighted.originColor = Cesium.Color.fromBytes(...attributes.color)\n            highlighted.id = id\n\n            attributes.color = Cesium.ColorGeometryInstanceAttribute.toValue(Cesium.Color.RED)\n          }\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#cesiumContainer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import { render } from \"./select_hightlight_instance.vue?vue&type=template&id=4c5759dc&scoped=true\"\nimport script from \"./select_hightlight_instance.vue?vue&type=script&lang=js\"\nexport * from \"./select_hightlight_instance.vue?vue&type=script&lang=js\"\n\nimport \"./select_hightlight_instance.vue?vue&type=style&index=0&id=4c5759dc&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhengjie/Documents/webgis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4c5759dc\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","data","path","process","mounted","this","init","methods","viewer","Cesium","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","debugShowFramesPerSecond","rectangleInstance","geometry","rectangle","vertexFormat","attributes","color","ellipsoidInstance","radii","modelMatrix","handler","primitives","add","geometryInstances","appearance","highlighted","primitive","undefined","originColor","canvas","setInputAction","click","pickobject","pick","position","getGeometryInstanceAttributes","contains","__exports__","render"],"sourceRoot":""}