{"version":3,"file":"js/5920.d40510ec.js","mappings":"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","sources":["webpack://webgis/./src/components/three/rain_cloud.vue","webpack://webgis/./src/components/three/rain_cloud.vue?5c7b"],"sourcesContent":["<template>\n  <div class=\"container\"><canvas id=\"c\"></canvas></div>\n</template>\n<script>\nimport * as THREE from 'three'\nconst img = 'SampleData/smoke.png'\nexport default {\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      const scene = new THREE.Scene()\n      scene.fog = new THREE.FogExp2(0x11111f, 0.002)\n\n      const canvas = document.querySelector('#c')\n      const renderer = new THREE.WebGLRenderer({ canvas })\n      renderer.setClearColor(scene.fog.color)\n      renderer.setSize(canvas.innerWidth, canvas.innerHeight)\n      renderer.setPixelRatio(window.devicePixelRatio)\n\n      const camera = new THREE.PerspectiveCamera(\n        60,\n        canvas.clientWidth / canvas.clientHeight,\n        1,\n        1000\n      )\n      camera.position.z = 1\n      camera.rotation.x = 1.16\n      camera.rotation.y = -0.12\n      camera.rotation.z = 0.27\n\n      const ambient = new THREE.AmbientLight(0x555555)\n      scene.add(ambient)\n\n      const directionalLight = new THREE.DirectionalLight(0xffeedd)\n      directionalLight.position.set(0, 0, 1)\n      scene.add(directionalLight)\n\n      const flash = new THREE.PointLight(0xffffff, 30, 500, 1.7)\n      flash.position.set(200, 300, 100)\n      scene.add(flash)\n\n      const rainGeo = new THREE.BufferGeometry()\n      const pointsArray = new Array()\n      const rainCount = 15000\n      for (let i = 0; i < rainCount; i++) {\n        const rainDrop = new THREE.Vector3(\n          Math.random() * 400 - 200,\n          Math.random() * 500 - 250,\n          Math.random() * 400 - 200\n        )\n        rainDrop.velocity = 0\n        pointsArray.push(rainDrop)\n      }\n      rainGeo.setFromPoints(pointsArray)\n      const rainMaterial = new THREE.PointsMaterial({\n        color: 0xaaaaaa,\n        size: 0.1,\n        transparent: true,\n      })\n      const rain = new THREE.Points(rainGeo, rainMaterial)\n      scene.add(rain)\n\n      const cloudParticles = []\n      let loader = new THREE.TextureLoader()\n      loader.load(\n        img,\n        function(texture) {\n          const cloudGeo = new THREE.PlaneBufferGeometry(500, 500)\n          const cloudMaterial = new THREE.MeshLambertMaterial({\n            map: texture,\n            transparent: true,\n          })\n          for (let p = 0; p < 25; p++) {\n            let cloud = new THREE.Mesh(cloudGeo, cloudMaterial)\n            cloud.position.set(\n              Math.random() * 800 - 400,\n              500,\n              Math.random() * 500 - 450\n            )\n            cloud.rotation.x = 1.16\n            cloud.rotation.y = -0.12\n            cloud.rotation.z = Math.random() * 360\n            cloud.material.opacity = 0.6\n            cloudParticles.push(cloud)\n            scene.add(cloud)\n          }\n          animate()\n        },\n        () => {},\n        (err) => {\n          console.error(err)\n        }\n      )\n      function resizeRendererToDisplaySize(renderer) {\n        const canvas = renderer.domElement\n        const width = canvas.clientWidth\n        const height = canvas.clientHeight\n        const needResize = canvas.width !== width || canvas.height !== height\n        if (needResize) {\n          renderer.setSize(width, height, false)\n        }\n        return needResize\n      }\n\n      function animate() {\n        if (resizeRendererToDisplaySize(renderer)) {\n          const canvas = renderer.domElement\n          camera.aspect = canvas.clientWidth / canvas.clientHeight\n          camera.updateProjectionMatrix()\n        }\n\n        cloudParticles.forEach((p) => {\n          p.rotation.z -= 0.002\n        })\n        pointsArray.forEach((p) => {\n          p.velocity -= 0.1 + Math.random() * 0.1\n          p.y += p.velocity\n          if (p.y < -200) {\n            p.y = 200\n            p.velocity = 0\n          }\n        })\n        rainGeo.setFromPoints(pointsArray)\n        rain.rotation.y += 0.002\n        if (Math.random() > 0.93 || flash.power > 100) {\n          if (flash.power < 100)\n            flash.position.set(\n              Math.random() * 400,\n              300 + Math.random() * 200,\n              100\n            )\n          flash.power = 50 + Math.random() * 500\n        }\n        renderer.render(scene, camera)\n        requestAnimationFrame(animate)\n      }\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.container {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n#c {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  margin: 0%;\n}\n</style>\n","import { render } from \"./rain_cloud.vue?vue&type=template&id=4193adc0&scoped=true\"\nimport script from \"./rain_cloud.vue?vue&type=script&lang=js\"\nexport * from \"./rain_cloud.vue?vue&type=script&lang=js\"\n\nimport \"./rain_cloud.vue?vue&type=style&index=0&id=4193adc0&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhengjie/Documents/webgis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4193adc0\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","_hoisted_2","_createElementBlock","_hoisted_1","img","mounted","this","init","methods","scene","THREE","fog","canvas","document","querySelector","renderer","setClearColor","color","setSize","innerWidth","innerHeight","setPixelRatio","window","devicePixelRatio","camera","clientWidth","clientHeight","position","z","rotation","x","y","ambient","add","directionalLight","set","flash","rainGeo","pointsArray","Array","rainCount","i","rainDrop","Math","random","velocity","push","setFromPoints","rainMaterial","size","transparent","rain","cloudParticles","loader","resizeRendererToDisplaySize","domElement","width","height","needResize","animate","aspect","updateProjectionMatrix","forEach","p","power","render","requestAnimationFrame","load","texture","cloudGeo","cloudMaterial","map","cloud","material","opacity","err","console","error","__exports__"],"sourceRoot":""}