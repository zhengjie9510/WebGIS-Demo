{"version":3,"file":"js/855.10c590c9.js","mappings":"iLACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,2LAOF,GACEC,OACE,MAAO,CAAEC,KAAMC,gBACjB,EACAC,UACEC,KAAKC,MACP,EACAC,QAAS,CACPD,OACE,IAAIE,EAAS,IAAIC,EAAAA,EAAc,mBAC3BA,EAAAA,EAAAA,oCAEFD,EAAOE,gBAAkBC,OAAOC,kBAElCJ,EAAOK,MAAMC,kBAAkBC,KAAKC,SAAU,EAC9CR,EAAOK,MAAMI,0BAA2B,EAGxC,MAAMC,EAAoB,IAAIT,EAAAA,EAAwB,CACpDU,SAAU,IAAIV,EAAAA,EAAyB,CACrCW,UAAWX,EAAAA,EAAAA,aAA8B,IAAO,IAAO,IAAO,IAC9DY,aAAcZ,EAAAA,EAAAA,gBAEhBX,GAAI,YACJwB,WAAY,CACVC,MAAO,IAAId,EAAAA,EAAsC,EAAK,EAAK,EAAK,OAG9De,EAAoB,IAAIf,EAAAA,EAAwB,CACpDU,SAAU,IAAIV,EAAAA,EAAyB,CACrCgB,MAAO,IAAIhB,EAAAA,EAAkB,IAAU,IAAU,KACjDY,aAAcZ,EAAAA,EAAAA,sBAEhBiB,YAAajB,EAAAA,EAAAA,sBAAqCA,EAAAA,EAAAA,wBAChDA,EAAAA,EAAAA,aAA+B,SAAU,WAAY,IAAIA,EAAAA,EAAkB,EAAK,EAAK,KAAW,IAAIA,EAAAA,GACtGX,GAAI,YACJwB,WAAY,CACVC,MAAOd,EAAAA,EAAAA,UAAgDA,EAAAA,EAAAA,SAS3D,IAAIkB,EANJnB,EAAOK,MAAMe,WAAWC,IAAI,IAAIpB,EAAAA,EAAiB,CAC/CqB,kBAAmB,CAACZ,EAAmBM,GACvCO,WAAY,IAAItB,EAAAA,KAKlB,IAAIuB,EAAc,CAAEC,eAAWC,EAAWC,iBAAaD,EAAWpC,QAAIoC,GACjEP,IACHA,EAAU,IAAIlB,EAAAA,EAA+BD,EAAOK,MAAMuB,QAC1DT,EAAQU,gBAAgBC,IACtB,MAAMC,EAAa/B,EAAOK,MAAM2B,KAAKF,EAAMG,UAE3C,GAAIT,EAAYC,UAAW,CACzB,MAAMX,EAAaU,EAAYC,UAAUS,8BAA8BV,EAAYlC,IACnFwB,EAAWC,MAAQd,EAAAA,EAAAA,QAA8CuB,EAAYG,aAC7EH,EAAYC,eAAYC,EACxBF,EAAYG,iBAAcD,EAC1BF,EAAYlC,QAAKoC,CACnB,CAEA,GAAIzB,EAAAA,EAAe8B,IAAe/B,EAAOK,MAAMe,WAAWe,SAASJ,EAAWN,WAAY,CACxF,MAAMA,EAAYM,EAAWN,UACvBnC,EAAKyC,EAAWzC,GAChBwB,EAAaW,EAAUS,8BAA8B5C,GAE3DkC,EAAYC,UAAYA,EACxBD,EAAYG,YAAc1B,EAAAA,EAAAA,aAA0Ba,EAAWC,OAC/DS,EAAYlC,GAAKA,EAEjBwB,EAAWC,MAAQd,EAAAA,EAAAA,QAA8CA,EAAAA,EAAAA,IACnE,IACCA,EAAAA,EAAAA,YAEP,I,WC3EJ,MAAMmC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/cesium/select_hightlight_instance.vue","webpack://webgis/./src/components/cesium/select_hightlight_instance.vue?6a52"],"sourcesContent":["<template>\r\n  <div id=\"cesiumContainer\"></div>\r\n</template>\r\n\r\n<script>\r\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\r\nimport * as Cesium from 'cesium'\r\n\r\nexport default {\r\n  data() {\r\n    return { path: process.env.BASE_URL }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      var viewer = new Cesium.Viewer('cesiumContainer')\r\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\r\n        //判断是否支持图像渲染像素化处理\r\n        viewer.resolutionScale = window.devicePixelRatio\r\n      }\r\n      viewer.scene.postProcessStages.fxaa.enabled = true\r\n      viewer.scene.debugShowFramesPerSecond = true;\r\n\r\n      // Draw different instances each with a unique color\r\n      const rectangleInstance = new Cesium.GeometryInstance({\r\n        geometry: new Cesium.RectangleGeometry({\r\n          rectangle: Cesium.Rectangle.fromDegrees(-140.0, 30.0, -100.0, 40.0),\r\n          vertexFormat: Cesium.PerInstanceColorAppearance.VERTEX_FORMAT\r\n        }),\r\n        id: 'rectangle',\r\n        attributes: {\r\n          color: new Cesium.ColorGeometryInstanceAttribute(1.0, 1.0, 1.0, 0.5)\r\n        }\r\n      });\r\n      const ellipsoidInstance = new Cesium.GeometryInstance({\r\n        geometry: new Cesium.EllipsoidGeometry({\r\n          radii: new Cesium.Cartesian3(500000.0, 500000.0, 1000000.0),\r\n          vertexFormat: Cesium.VertexFormat.POSITION_AND_NORMAL\r\n        }),\r\n        modelMatrix: Cesium.Matrix4.multiplyByTranslation(Cesium.Transforms.eastNorthUpToFixedFrame(\r\n          Cesium.Cartesian3.fromDegrees(-95.59777, 40.03883)), new Cesium.Cartesian3(0.0, 0.0, 500000.0), new Cesium.Matrix4()),\r\n        id: 'ellipsoid',\r\n        attributes: {\r\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(Cesium.Color.AQUA)\r\n        }\r\n      });\r\n      viewer.scene.primitives.add(new Cesium.Primitive({\r\n        geometryInstances: [rectangleInstance, ellipsoidInstance],\r\n        appearance: new Cesium.PerInstanceColorAppearance()\r\n      }));\r\n\r\n      // 处理选中事件\r\n      let handler = undefined\r\n      let highlighted = { primitive: undefined, originColor: undefined, id: undefined } // 高亮\r\n      if (!handler) {\r\n        handler = new Cesium.ScreenSpaceEventHandler(viewer.scene.canvas);\r\n        handler.setInputAction((click) => {\r\n          const pickobject = viewer.scene.pick(click.position)\r\n          // step1 恢复已高亮的primitie颜色\r\n          if (highlighted.primitive) {\r\n            const attributes = highlighted.primitive.getGeometryInstanceAttributes(highlighted.id)\r\n            attributes.color = Cesium.ColorGeometryInstanceAttribute.toValue(highlighted.originColor)\r\n            highlighted.primitive = undefined\r\n            highlighted.originColor = undefined\r\n            highlighted.id = undefined\r\n          }\r\n          // step2 对选中的primitive改变颜色\r\n          if (Cesium.defined(pickobject) && viewer.scene.primitives.contains(pickobject.primitive)) {\r\n            const primitive = pickobject.primitive\r\n            const id = pickobject.id\r\n            const attributes = primitive.getGeometryInstanceAttributes(id)\r\n\r\n            highlighted.primitive = primitive\r\n            highlighted.originColor = Cesium.Color.fromBytes(...attributes.color)\r\n            highlighted.id = id\r\n\r\n            attributes.color = Cesium.ColorGeometryInstanceAttribute.toValue(Cesium.Color.RED)\r\n          }\r\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\r\n      }\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#cesiumContainer {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./select_hightlight_instance.vue?vue&type=template&id=71fe994b&scoped=true\"\nimport script from \"./select_hightlight_instance.vue?vue&type=script&lang=js\"\nexport * from \"./select_hightlight_instance.vue?vue&type=script&lang=js\"\n\nimport \"./select_hightlight_instance.vue?vue&type=style&index=0&id=71fe994b&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Documents\\\\GitHub\\\\webgis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-71fe994b\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","data","path","process","mounted","this","init","methods","viewer","Cesium","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","debugShowFramesPerSecond","rectangleInstance","geometry","rectangle","vertexFormat","attributes","color","ellipsoidInstance","radii","modelMatrix","handler","primitives","add","geometryInstances","appearance","highlighted","primitive","undefined","originColor","canvas","setInputAction","click","pickobject","pick","position","getGeometryInstanceAttributes","contains","__exports__","render"],"sourceRoot":""}