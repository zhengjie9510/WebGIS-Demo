{"version":3,"file":"js/545.67815a90.js","mappings":"+KACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,+FAgBF,GACEC,UACEC,KAAKC,MACP,EACAC,QAAS,CACPD,OACE,IAAIE,EAAS,IAAIC,EAAAA,EAAO,mBACpBC,EAAAA,EAAAA,oCAEFF,EAAOG,gBAAkBC,OAAOC,kBAElCL,EAAOM,MAAMC,kBAAkBC,KAAKC,SAAU,EAE9C,IAAIH,EAAQN,EAAOM,MAGnB,IAAII,EAAOJ,EAAMK,WAAWC,IAC1B,IAAIC,EAAAA,EAAU,CACZC,kBAAmB,IAAIC,EAAAA,EAAiB,CACtCC,SAAU,IAAIC,EAAAA,EAAiB,CAC7BC,UAAWC,EAAAA,EAAAA,iBAA4B,EACpC,IACD,IACC,GACD,KAEFC,MAAO,MAGXC,WAAY,IAAIC,EAAAA,EAA2B,CACzCC,SAAU,IAAIC,EAAAA,EAAS,CACrBC,OAAQ,CACNC,SAAU,CACRC,MAAO,IAAIC,EAAAA,EAAM,EAAK,EAAK,EAAK,GAChCC,WAAY,GACZC,OAAQ,GAEVC,OAAQ,usBAuBlB/B,EAAOM,MAAM0B,UAAUC,kBAAiB,WACtC,IAAIH,EAASpB,EAAKW,WAAWE,SAASG,SAASI,OAC/CA,GAAU,IACNA,EAAS,IACXA,EAAS,GAEXpB,EAAKW,WAAWE,SAASG,SAASI,OAASA,CAC7C,GACF,I,QC9EJ,MAAMI,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/cesium/trail_line.vue","webpack://webgis/./src/components/cesium/trail_line.vue?8bb1"],"sourcesContent":["<template>\r\n  <div id=\"cesiumContainer\"></div>\r\n</template>\r\n\r\n<script>\r\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\r\nimport {\r\n  Viewer,\r\n  FeatureDetection,\r\n  Cartesian3,\r\n  GeometryInstance,\r\n  Primitive,\r\n  PolylineMaterialAppearance,\r\n  PolylineGeometry,\r\n  Material,\r\n  Color,\r\n} from 'cesium'\r\nexport default {\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      var viewer = new Viewer('cesiumContainer')\r\n      if (FeatureDetection.supportsImageRenderingPixelated()) {\r\n        //判断是否支持图像渲染像素化处理\r\n        viewer.resolutionScale = window.devicePixelRatio\r\n      }\r\n      viewer.scene.postProcessStages.fxaa.enabled = true\r\n      // Create the scene.\r\n      var scene = viewer.scene\r\n\r\n      // Example : Draw a red polyline on the globe surface\r\n      let line = scene.primitives.add(\r\n        new Primitive({\r\n          geometryInstances: new GeometryInstance({\r\n            geometry: new PolylineGeometry({\r\n              positions: Cartesian3.fromDegreesArray([\r\n                -124.0,\r\n                40.0,\r\n                -80.0,\r\n                40.0,\r\n              ]),\r\n              width: 5.0,\r\n            }),\r\n          }),\r\n          appearance: new PolylineMaterialAppearance({\r\n            material: new Material({\r\n              fabric: {\r\n                uniforms: {\r\n                  color: new Color(1.0, 0.0, 0.0, 1.0),\r\n                  percentage: 0.1, // 尾迹百分比\r\n                  offset: 0.0,\r\n                },\r\n                source: `\r\n                  uniform vec4 color;\r\n                  uniform float percentage;\r\n                  czm_material czm_getMaterial(czm_materialInput materialInput)\r\n                  {\r\n                      czm_material material = czm_getDefaultMaterial(materialInput);\r\n                      float s = materialInput.s;\r\n                      material.diffuse = color.rgb;\r\n                      if(s > percentage + offset || s < offset){\r\n                          material.alpha = 0.0;\r\n                      }\r\n                      else{\r\n                          material.alpha = (s-offset)/(percentage) ;\r\n                      }\r\n                      return material;\r\n                  }`,\r\n              },\r\n            }),\r\n          }),\r\n        })\r\n      )\r\n\r\n      // 动态修改雷达材质中的offset变量，从而实现动态效果。\r\n      viewer.scene.preUpdate.addEventListener(function() {\r\n        var offset = line.appearance.material.uniforms.offset\r\n        offset += 0.01\r\n        if (offset > 1.0) {\r\n          offset = 0.0\r\n        }\r\n        line.appearance.material.uniforms.offset = offset\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#cesiumContainer {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./trail_line.vue?vue&type=template&id=e03aeec4&scoped=true\"\nimport script from \"./trail_line.vue?vue&type=script&lang=js\"\nexport * from \"./trail_line.vue?vue&type=script&lang=js\"\n\nimport \"./trail_line.vue?vue&type=style&index=0&id=e03aeec4&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Documents\\\\GitHub\\\\webgis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e03aeec4\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","mounted","this","init","methods","viewer","Viewer","FeatureDetection","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","line","primitives","add","Primitive","geometryInstances","GeometryInstance","geometry","PolylineGeometry","positions","Cartesian3","width","appearance","PolylineMaterialAppearance","material","Material","fabric","uniforms","color","Color","percentage","offset","source","preUpdate","addEventListener","__exports__","render"],"sourceRoot":""}