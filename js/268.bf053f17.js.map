{"version":3,"file":"js/268.bf053f17.js","mappings":"iLACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,mJAMF,MAAMC,EAAaC,EAAQ,OAE3B,OACEC,UACEC,KAAKC,MACP,EACAC,QAAS,CACPD,OACE,IAAIE,EAAS,IAAIC,EAAAA,EAAc,mBAC3BA,EAAAA,EAAAA,oCAEFD,EAAOE,gBAAkBC,OAAOC,kBAElCJ,EAAOK,MAAMC,kBAAkBC,KAAKC,SAAU,EAE9C,MAAMC,EAAUf,EAAWgB,SAAS,GAC9BC,EAAcF,EAAQG,SAASD,YAErC,IAAIC,EAAW,IAAIX,EAAAA,EAAwB,CACzCY,UAAWZ,EAAAA,EAAAA,iBAAmCU,EAAYG,KAAK,IAC/DC,MAAO,KAGT,MAAMC,EAAW,IAAIf,EAAAA,EAAwB,CAC3CW,SAAUA,IAENK,EAAa,IAAIhB,EAAAA,EAAiB,CACtCiB,kBAAmBF,EACnBG,WAAY,IAAIlB,EAAAA,EAAkC,CAChDmB,SAAU,IAAInB,EAAAA,EAAgB,CAC5BoB,OAAQ,CACNC,KAAM,gBACNC,SAAU,CACRC,MAAO,IAAIvB,EAAAA,EAAa,GAAK,GAAK,GAAK,GACvCwB,UAAW,IACXC,WAAY,GAEdC,OAAQ,0iCA4BdC,cAAc,IAGVC,EAAW,IAAI5B,EAAAA,EAAwB,CAC3CW,SAAU,IAAIX,EAAAA,EAAuB,CACnC6B,iBAAkB,IAAI7B,EAAAA,EACpBA,EAAAA,EAAAA,iBAAmC,CACjC,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,IAAK,KAEhC,CAAC,IAAIA,EAAAA,EACHA,EAAAA,EAAAA,iBAAmCU,EAAYG,KAAK,WAMtDiB,EAAO,IAAI9B,EAAAA,EAAuB,CACtCiB,kBAAmBW,EACnBV,WAAY,IAAIlB,EAAAA,EAA0B,CACxCmB,SAAU,IAAInB,EAAAA,EAAgB,CAC5BoB,OAAQ,CACNC,KAAM,QACNC,SAAU,CACRC,MAAOvB,EAAAA,EAAAA,MAAAA,UAA6B,UAK5C2B,cAAc,IAGhB5B,EAAOK,MAAM2B,WAAWC,IAAIhB,GAC5BjB,EAAOK,MAAM2B,WAAWC,IAAIF,GAE5B/B,EAAOkC,OAAOC,oBAAoBlC,EAAAA,EAAAA,eAAuCW,GAAUwB,eAAgB,CAAEC,SAAU,GACjH,I,WCpGJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/cesium/border_mask.vue","webpack://webgis/./src/components/cesium/border_mask.vue?22c7"],"sourcesContent":["<template>\r\n  <div id=\"cesiumContainer\"></div>\r\n</template>\r\n\r\n<script>\r\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\r\nimport * as Cesium from 'cesium'\r\nconst borderJson = require('../../../public/SampleData/sichuan.json')\r\n\r\nexport default {\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      var viewer = new Cesium.Viewer('cesiumContainer')\r\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\r\n        //判断是否支持图像渲染像素化处理\r\n        viewer.resolutionScale = window.devicePixelRatio\r\n      }\r\n      viewer.scene.postProcessStages.fxaa.enabled = true\r\n\r\n      const feature = borderJson.features[0]\r\n      const coordinates = feature.geometry.coordinates\r\n\r\n      let geometry = new Cesium.PolylineGeometry({\r\n        positions: Cesium.Cartesian3.fromDegreesArray(coordinates.flat(2)),\r\n        width: 10.0\r\n      })\r\n\r\n      const instance = new Cesium.GeometryInstance({\r\n        geometry: geometry\r\n      })\r\n      const glowBorder = new Cesium.Primitive({\r\n        geometryInstances: instance,\r\n        appearance: new Cesium.PolylineMaterialAppearance({\r\n          material: new Cesium.Material({\r\n            fabric: {\r\n              type: 'MyBorderColor',\r\n              uniforms: {\r\n                color: new Cesium.Color(0.2, 0.2, 0.8, 1.0),\r\n                glowPower: 0.25,\r\n                taperPower: 1\r\n              },\r\n              source: `\r\n                  uniform vec4 color;\r\n                  uniform float glowPower;\r\n                  uniform float taperPower;\r\n                  czm_material czm_getMaterial(czm_materialInput materialInput)\r\n                  {\r\n                    czm_material material = czm_getDefaultMaterial(materialInput);\r\n                    vec2 st = materialInput.st;\r\n                    float glow = glowPower / abs(st.t - 0.5) - (glowPower / 0.5);\r\n\r\n                    if (taperPower <= 0.99999) {\r\n                        glow *= min(1.0, taperPower / (0.5 - st.s * 0.5) - (taperPower / 0.5));\r\n                    }\r\n\r\n                    vec4 fragColor;\r\n                    fragColor.rgb = max(vec3(glow - 1.0 + color.rgb), color.rgb);\r\n                    fragColor.a = clamp(0.0, 1.0, glow) * color.a;\r\n                    fragColor = czm_gammaCorrect(fragColor);\r\n\r\n                    material.emission = fragColor.rgb;\r\n                    material.alpha = fragColor.a;\r\n\r\n                    return material;\r\n                  }\r\n                `\r\n            }\r\n          })\r\n        }),\r\n        allowPicking: false\r\n      })\r\n\r\n      const maskArea = new Cesium.GeometryInstance({\r\n        geometry: new Cesium.PolygonGeometry({\r\n          polygonHierarchy: new Cesium.PolygonHierarchy(\r\n            Cesium.Cartesian3.fromDegreesArray([\r\n              45, 10, 45, 60, 145, 60, 145, 10\r\n            ]),\r\n            [new Cesium.PolygonHierarchy(\r\n              Cesium.Cartesian3.fromDegreesArray(coordinates.flat(2))\r\n            )]\r\n          )\r\n        }),\r\n      })\r\n\r\n      const mask = new Cesium.GroundPrimitive({\r\n        geometryInstances: maskArea,\r\n        appearance: new Cesium.MaterialAppearance({\r\n          material: new Cesium.Material({\r\n            fabric: {\r\n              type: 'Color',\r\n              uniforms: {\r\n                color: Cesium.Color.BLACK.withAlpha(0.7),\r\n              }\r\n            }\r\n          })\r\n        }),\r\n        allowPicking: false\r\n      })\r\n\r\n      viewer.scene.primitives.add(glowBorder)\r\n      viewer.scene.primitives.add(mask)\r\n\r\n      viewer.camera.flyToBoundingSphere(Cesium.PolylineGeometry.createGeometry(geometry).boundingSphere, { duration: 0 })\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#cesiumContainer {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./border_mask.vue?vue&type=template&id=d254ace8&scoped=true\"\nimport script from \"./border_mask.vue?vue&type=script&lang=js\"\nexport * from \"./border_mask.vue?vue&type=script&lang=js\"\n\nimport \"./border_mask.vue?vue&type=style&index=0&id=d254ace8&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Documents\\\\GitHub\\\\webgis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d254ace8\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","borderJson","require","mounted","this","init","methods","viewer","Cesium","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","feature","features","coordinates","geometry","positions","flat","width","instance","glowBorder","geometryInstances","appearance","material","fabric","type","uniforms","color","glowPower","taperPower","source","allowPicking","maskArea","polygonHierarchy","mask","primitives","add","camera","flyToBoundingSphere","boundingSphere","duration","__exports__","render"],"sourceRoot":""}