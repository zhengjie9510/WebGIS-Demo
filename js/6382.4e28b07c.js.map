{"version":3,"file":"js/6382.4e28b07c.js","mappings":"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","sources":["webpack://webgis/./src/components/public/move_3dTiles.vue","webpack://webgis/./src/components/public/move_3dTiles.vue?2161"],"sourcesContent":["<template>\n  <div class=\"map\">\n    <div id=\"cesiumContainer\"></div>\n    <div id=\"toolbar\">\n      <el-row justify=\"space-between\">\n        <el-input v-model=\"url\" placeholder=\"Please input\" style=\"width: 80%;\" clearable>\n          <template #prepend>URL</template>\n        </el-input>\n        <el-button type=\"primary\" @click=\"handleButtonClick\">Upload</el-button>\n      </el-row>\n      <span>X (度)</span>\n      <el-slider v-model=\"data.x\" :min=\"-0.1\" :max=\"0.1\" :step=\"0.00001\" show-input>\n      </el-slider>\n      <span>Y (度)</span>\n      <el-slider v-model=\"data.y\" :min=\"-0.1\" :max=\"0.1\" :step=\"0.00001\" show-input>\n      </el-slider>\n      <span>Z (米)</span>\n      <el-slider v-model=\"data.z\" :min=\"-500\" :max=\"500\" :step=\"1\" show-input>\n      </el-slider>\n    </div>\n  </div>\n</template>\n\n<script >\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\nimport * as Cesium from 'cesium'\n\n/** @type {Cesium.Viewer | undefined} */\nlet viewer = undefined;\n/** @type {Cesium.Cesium3DTileset | undefined} */\nlet tileset = undefined;\nexport default {\n  data() {\n    return {\n      path: process.env.BASE_URL,\n      data: {\n        x: 0,\n        y: 0,\n        z: 0,\n        dir: 0,\n        p: 0,\n        r: 0\n      },\n      url: \"\"\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    async init() {\n      viewer = new Cesium.Viewer('cesiumContainer', {\n        terrainProvider: await Cesium.createWorldTerrainAsync()\n      })\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\n        //判断是否支持图像渲染像素化处理\n        viewer.resolutionScale = window.devicePixelRatio\n      }\n      viewer.scene.globe.depthTestAgainstTerrain = true\n      viewer.scene.postProcessStages.fxaa.enabled = true\n      viewer.scene.debugShowFramesPerSecond = true\n\n      this.url = this.path + 'SampleData/Cesium3DTiles/Tilesets/Tileset/tileset.json'\n      tileset = await Cesium.Cesium3DTileset.fromUrl(this.url)\n      viewer.scene.primitives.add(tileset)\n      viewer.zoomTo(tileset, new Cesium.HeadingPitchRange(0.0, -0.5, tileset.boundingSphere.radius * 2.0))\n    },\n\n    /**\n     * 调整模型位置\n     * @param {Cesium.Cesium3DTileset} tileset 需要调整的模型\n     * @param {Object} data 模型姿态数据\n     */\n    adjust3DTiles(tileset, data) {\n      const cartographic = Cesium.Cartographic.fromCartesian(\n        tileset.boundingSphere.center\n      );\n      const origin = Cesium.Cartesian3.fromRadians(\n        cartographic.longitude,\n        cartographic.latitude,\n        cartographic.height\n      )\n      const offset = Cesium.Cartesian3.fromRadians(\n        cartographic.longitude + data.x * Math.PI / 180,\n        cartographic.latitude + data.y * Math.PI / 180,\n        cartographic.height + data.z\n      )\n      const translation = Cesium.Cartesian3.subtract(\n        offset,\n        origin,\n        new Cesium.Cartesian3()\n      );\n      tileset.modelMatrix = Cesium.Matrix4.fromTranslation(translation)\n    },\n\n    /**\n     * 处理按钮点击，重新加载模型\n     */\n    async handleButtonClick() {\n      viewer.scene.primitives.removeAll()\n      tileset = await Cesium.Cesium3DTileset.fromUrl(this.url)\n      viewer.scene.primitives.add(tileset)\n      viewer.zoomTo(tileset, new Cesium.HeadingPitchRange(0.0, -0.5, tileset.boundingSphere.radius * 2.0))\n    }\n  },\n  watch: {\n    data: {\n      handler() {\n        this.adjust3DTiles(tileset, this.data)\n      },\n      deep: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.map {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n\n  #cesiumContainer {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n  }\n\n  #toolbar {\n    position: absolute;\n    top: 10px;\n    left: 10px;\n    width: 400px;\n    background: rgba(42, 42, 42, 0.8);\n    padding: 20px;\n    border-radius: 4px;\n    color: white;\n  }\n}\n</style>\n","import { render } from \"./move_3dTiles.vue?vue&type=template&id=07844192&scoped=true\"\nimport script from \"./move_3dTiles.vue?vue&type=script&lang=js\"\nexport * from \"./move_3dTiles.vue?vue&type=script&lang=js\"\n\nimport \"./move_3dTiles.vue?vue&type=style&index=0&id=07844192&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhengjie/Documents/webgis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-07844192\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","id","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_el_row","justify","_component_el_input","$data","placeholder","style","clearable","prepend","_component_el_button","type","onClick","$options","_hoisted_4","_component_el_slider","x","min","max","step","_hoisted_5","y","_hoisted_6","z","viewer","tileset","data","path","process","dir","p","r","url","mounted","this","init","methods","async","Cesium","terrainProvider","resolutionScale","window","devicePixelRatio","scene","globe","depthTestAgainstTerrain","postProcessStages","fxaa","enabled","debugShowFramesPerSecond","primitives","add","zoomTo","boundingSphere","radius","adjust3DTiles","cartographic","center","origin","longitude","latitude","height","offset","Math","PI","translation","modelMatrix","removeAll","watch","handler","deep","__exports__","render"],"sourceRoot":""}