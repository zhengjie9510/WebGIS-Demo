{"version":3,"file":"js/3025.9183440d.js","mappings":"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","sources":["webpack://webgis/./src/components/cesium/move_3dTiles.vue","webpack://webgis/./src/components/cesium/move_3dTiles.vue?d79b","webpack://webgis/./node_modules/@cesium/engine/Source/Core/createWorldTerrain.js"],"sourcesContent":["<template>\r\n  <div class=\"map\">\r\n    <div id=\"cesiumContainer\"></div>\r\n    <div id=\"toolbar\">\r\n      <el-row justify=\"space-between\">\r\n        <el-input v-model=\"url\" placeholder=\"Please input\" style=\"width: 80%;\" clearable>\r\n          <template #prepend>URL</template>\r\n        </el-input>\r\n        <el-button type=\"primary\" @click=\"handleButtonClick\">Upload</el-button>\r\n      </el-row>\r\n      <span>X (度)</span>\r\n      <el-slider v-model=\"data.x\" :min=\"-0.1\" :max=\"0.1\" :step=\"0.00001\" show-input>\r\n      </el-slider>\r\n      <span>Y (度)</span>\r\n      <el-slider v-model=\"data.y\" :min=\"-0.1\" :max=\"0.1\" :step=\"0.00001\" show-input>\r\n      </el-slider>\r\n      <span>Z (米)</span>\r\n      <el-slider v-model=\"data.z\" :min=\"-500\" :max=\"500\" :step=\"1\" show-input>\r\n      </el-slider>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script >\r\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\r\nimport * as Cesium from 'cesium'\r\n\r\n/** @type {Cesium.Viewer | undefined} */\r\nlet viewer = undefined;\r\n/** @type {Cesium.Cesium3DTileset | undefined} */\r\nlet tileset = undefined;\r\nexport default {\r\n  data() {\r\n    return {\r\n      path: process.env.BASE_URL,\r\n      data: {\r\n        x: 0,\r\n        y: 0,\r\n        z: 0,\r\n        dir: 0,\r\n        p: 0,\r\n        r: 0\r\n      },\r\n      url: \"\"\r\n    }\r\n  },\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      viewer = new Cesium.Viewer('cesiumContainer', {\r\n        terrainProvider: Cesium.createWorldTerrain()\r\n      })\r\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\r\n        //判断是否支持图像渲染像素化处理\r\n        viewer.resolutionScale = window.devicePixelRatio\r\n      }\r\n      viewer.scene.globe.depthTestAgainstTerrain = true\r\n      viewer.scene.postProcessStages.fxaa.enabled = true\r\n      viewer.scene.debugShowFramesPerSecond = true\r\n\r\n      this.url = this.path + 'SampleData/Cesium3DTiles/Tilesets/Tileset/tileset.json'\r\n      tileset = new Cesium.Cesium3DTileset({\r\n        url: this.url,\r\n      })\r\n\r\n      tileset.readyPromise.then((tileset) => {\r\n        viewer.scene.primitives.add(tileset)\r\n        viewer.zoomTo(tileset, new Cesium.HeadingPitchRange(0.0, -0.5, tileset.boundingSphere.radius * 2.0))\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 调整模型位置\r\n     * @param {Cesium.Cesium3DTileset} tileset 需要调整的模型\r\n     * @param {Object} data 模型姿态数据\r\n     */\r\n    adjust3DTiles(tileset, data) {\r\n      tileset.readyPromise.then((tileset) => {\r\n        const cartographic = Cesium.Cartographic.fromCartesian(\r\n          tileset.boundingSphere.center\r\n        );\r\n        const origin = Cesium.Cartesian3.fromRadians(\r\n          cartographic.longitude,\r\n          cartographic.latitude,\r\n          cartographic.height\r\n        )\r\n        const offset = Cesium.Cartesian3.fromRadians(\r\n          cartographic.longitude + data.x * Math.PI / 180,\r\n          cartographic.latitude + data.y * Math.PI / 180,\r\n          cartographic.height + data.z\r\n        )\r\n        const translation = Cesium.Cartesian3.subtract(\r\n          offset,\r\n          origin,\r\n          new Cesium.Cartesian3()\r\n        );\r\n        tileset.modelMatrix = Cesium.Matrix4.fromTranslation(translation)\r\n      })\r\n    },\r\n\r\n    /**\r\n     * 处理按钮点击，重新加载模型\r\n     */\r\n    handleButtonClick() {\r\n      viewer.scene.primitives.removeAll()\r\n      tileset = new Cesium.Cesium3DTileset({\r\n        url: this.url,\r\n      })\r\n      tileset.readyPromise.then((tileset) => {\r\n        viewer.scene.primitives.add(tileset)\r\n        viewer.zoomTo(tileset, new Cesium.HeadingPitchRange(0.0, -0.5, tileset.boundingSphere.radius * 2.0))\r\n      });\r\n    }\r\n  },\r\n  watch: {\r\n    data: {\r\n      handler() {\r\n        this.adjust3DTiles(tileset, this.data)\r\n      },\r\n      deep: true\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.map {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n\r\n  #cesiumContainer {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n\r\n  #toolbar {\r\n    position: absolute;\r\n    top: 10px;\r\n    left: 10px;\r\n    width: 400px;\r\n    background: rgba(42, 42, 42, 0.8);\r\n    padding: 20px;\r\n    border-radius: 4px;\r\n    color: white;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./move_3dTiles.vue?vue&type=template&id=6b7a79d0&scoped=true\"\nimport script from \"./move_3dTiles.vue?vue&type=script&lang=js\"\nexport * from \"./move_3dTiles.vue?vue&type=script&lang=js\"\n\nimport \"./move_3dTiles.vue?vue&type=style&index=0&id=6b7a79d0&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Documents\\\\GitHub\\\\webgis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6b7a79d0\"]])\n\nexport default __exports__","import CesiumTerrainProvider from \"./CesiumTerrainProvider.js\";\nimport defaultValue from \"./defaultValue.js\";\nimport deprecationWarning from \"./deprecationWarning.js\";\nimport IonResource from \"./IonResource.js\";\n\n/**\n * Creates a {@link CesiumTerrainProvider} instance for the {@link https://cesium.com/content/#cesium-world-terrain|Cesium World Terrain}.\n *\n * @function\n *\n * @param {object} [options] Object with the following properties:\n * @param {boolean} [options.requestVertexNormals=false] Flag that indicates if the client should request additional lighting information from the server if available.\n * @param {boolean} [options.requestWaterMask=false] Flag that indicates if the client should request per tile water masks from the server if available.\n * @returns {CesiumTerrainProvider}\n *\n * @see Ion\n *\n * @example\n * // Create Cesium World Terrain with default settings\n * const viewer = new Cesium.Viewer('cesiumContainer', {\n *     terrainProvider : Cesium.createWorldTerrain();\n * });\n *\n * @example\n * // Create Cesium World Terrain with water and normals.\n * const viewer1 = new Cesium.Viewer('cesiumContainer', {\n *     terrainProvider : Cesium.createWorldTerrain({\n *         requestWaterMask : true,\n *         requestVertexNormals : true\n *     });\n * });\n *\n */\nfunction createWorldTerrain(options) {\n  deprecationWarning(\n    \"createWorldTerrain\",\n    \"createWorldTerrain was deprecated in CesiumJS 1.104.  It will be in CesiumJS 1.107.  Use createWorldTerrainAsync instead.\"\n  );\n\n  options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n  const provider = new CesiumTerrainProvider({\n    requestVertexNormals: defaultValue(options.requestVertexNormals, false),\n    requestWaterMask: defaultValue(options.requestWaterMask, false),\n  });\n\n  // This is here in order to avoid throwing a second deprecation error\n  // by using the deprecated url parameter in the constructor above\n  provider._readyPromise = CesiumTerrainProvider._initializeReadyPromise(\n    {\n      url: IonResource.fromAssetId(1),\n      requestVertexNormals: defaultValue(options.requestVertexNormals, false),\n      requestWaterMask: defaultValue(options.requestWaterMask, false),\n    },\n    provider\n  );\n\n  return provider;\n}\nexport default createWorldTerrain;\n"],"names":["class","_createElementVNode","id","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_el_row","justify","_component_el_input","$data","placeholder","style","clearable","prepend","_component_el_button","type","onClick","$options","_hoisted_4","_component_el_slider","x","min","max","step","_hoisted_5","y","_hoisted_6","z","viewer","tileset","data","path","process","dir","p","r","url","mounted","this","init","methods","Cesium","terrainProvider","resolutionScale","window","devicePixelRatio","scene","globe","depthTestAgainstTerrain","postProcessStages","fxaa","enabled","debugShowFramesPerSecond","readyPromise","then","primitives","add","zoomTo","boundingSphere","radius","adjust3DTiles","cartographic","center","origin","longitude","latitude","height","offset","Math","PI","translation","modelMatrix","handleButtonClick","removeAll","watch","handler","deep","__exports__","render","createWorldTerrain","options","deprecationWarning","defaultValue","provider","CesiumTerrainProvider","requestVertexNormals","requestWaterMask","_readyPromise","IonResource"],"sourceRoot":""}