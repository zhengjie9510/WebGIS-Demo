{"version":3,"file":"js/7338.80bf5ec3.js","mappings":"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","sources":["webpack://webgis/./src/components/public/custom_geometry.vue","webpack://webgis/./src/components/public/custom_geometry.vue?7338"],"sourcesContent":["<template>\r\n  <div id=\"cesiumContainer\"></div>\r\n</template>\r\n\r\n<script>\r\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\r\nimport {\r\n  Viewer,\r\n  FeatureDetection,\r\n  Cartesian3,\r\n  GeometryInstance,\r\n  Primitive,\r\n  BlendingState,\r\n  GeometryAttributes,\r\n  PrimitiveType,\r\n  GeometryAttribute,\r\n  Transforms,\r\n  ComponentDatatype,\r\n  Geometry,\r\n  BoundingSphere,\r\n  Appearance,\r\n  Matrix4,\r\n  Math as CesiumMath\r\n} from 'cesium'\r\nexport default {\r\n  mounted() {\r\n    this.init()\r\n  },\r\n  methods: {\r\n    init() {\r\n      var viewer = new Viewer('cesiumContainer')\r\n      if (FeatureDetection.supportsImageRenderingPixelated()) {\r\n        //判断是否支持图像渲染像素化处理\r\n        viewer.resolutionScale = window.devicePixelRatio\r\n      }\r\n      viewer.scene.postProcessStages.fxaa.enabled = true\r\n      var scene = viewer.scene\r\n\r\n      // Create a cube\r\n      //    v6----- v5\r\n      //   /|      /|\r\n      //  v1------v0|\r\n      //  | |     | |\r\n      //  | |v7---|-|v4\r\n      //  |/      |/\r\n      //  v2------v3\r\n      var vertices = new Float32Array([\r\n        // Vertex coordinates\r\n        1.0, 1.0, 1.0, -1.0, 1.0, 1.0, -1.0, -1.0, 1.0, 1.0, -1.0, 1.0, // v0-v1-v2-v3 front\r\n        1.0, 1.0, 1.0, 1.0, -1.0, 1.0, 1.0, -1.0, -1.0, 1.0, 1.0, -1.0, // v0-v3-v4-v5 right\r\n        1.0, 1.0, 1.0, 1.0, 1.0, -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, 1.0, // v0-v5-v6-v1 up\r\n        -1.0, 1.0, 1.0, -1.0, 1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, 1.0, // v1-v6-v7-v2 left\r\n        -1.0, -1.0, -1.0, 1.0, -1.0, -1.0, 1.0, -1.0, 1.0, -1.0, -1.0, 1.0, // v7-v4-v3-v2 down\r\n        1.0, -1.0, -1.0, -1.0, -1.0, -1.0, -1.0, 1.0, -1.0, 1.0, 1.0, -1.0, // v4-v7-v6-v5 back\r\n      ])\r\n\r\n      var colors = new Float32Array([\r\n        // Colors\r\n        0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, // v0-v1-v2-v3 front(blue)\r\n        0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, // v0-v3-v4-v5 right(green)\r\n        1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, 1.0, 0.4, 0.4, // v0-v5-v6-v1 up(red)\r\n        1.0, 1.0, 0.4, 1.0, 1.0, 0.4, 1.0, 1.0, 0.4, 1.0, 1.0, 0.4, // v1-v6-v7-v2 left\r\n        1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, // v7-v4-v3-v2 down\r\n        0.4, 1.0, 1.0, 0.4, 1.0, 1.0, 0.4, 1.0, 1.0, 0.4, 1.0, 1.0, // v4-v7-v6-v5 back\r\n      ])\r\n\r\n      var attributes = new GeometryAttributes({\r\n        position: new GeometryAttribute({\r\n          componentDatatype: ComponentDatatype.DOUBLE,\r\n          componentsPerAttribute: 3,\r\n          values: vertices,\r\n        }),\r\n        color: new GeometryAttribute({\r\n          componentDatatype: ComponentDatatype.FLOAT,\r\n          componentsPerAttribute: 3,\r\n          values: colors,\r\n        }),\r\n      })\r\n\r\n      var indices = new Uint8Array([\r\n        // Indices of the vertices\r\n        0, 1, 2, 0, 2, 3, // front\r\n        4, 5, 6, 4, 6, 7, // right\r\n        8, 9, 10, 8, 10, 11, // up\r\n        12, 13, 14, 12, 14, 15, // left\r\n        16, 17, 18, 16, 18, 19, // down\r\n        20, 21, 22, 20, 22, 23, // back\r\n      ])\r\n\r\n      //包围球\r\n      var boundingSphere = new BoundingSphere(\r\n        new Cartesian3(0.0, 0.0, 0.0),\r\n        2.0\r\n      )\r\n\r\n      var geometry = new Geometry({\r\n        attributes: attributes,\r\n        indices: indices,\r\n        primitiveType: PrimitiveType.TRIANGLES,\r\n        boundingSphere: boundingSphere,\r\n      })\r\n\r\n      //模型矩阵\r\n      var modelMatrix = Matrix4.multiplyByUniformScale(\r\n        Matrix4.multiplyByTranslation(\r\n          Transforms.eastNorthUpToFixedFrame(\r\n            Cartesian3.fromDegrees(116.23, 39.54)\r\n          ),\r\n          new Cartesian3(0.0, 0.0, 25),\r\n          new Matrix4()\r\n        ),\r\n        25.0,\r\n        new Matrix4()\r\n      )\r\n      //四面体的实例\r\n      var instance = new GeometryInstance({\r\n        geometry: geometry,\r\n        modelMatrix: modelMatrix,\r\n      })\r\n      function v_shader() {\r\n        return `\r\n          in vec3 position3DHigh;\r\n          in vec3 position3DLow;\r\n          in float batchId;\r\n          in vec4 color;\r\n          out vec4 v_color;\r\n          void main() {\r\n              vec4 position = czm_modelViewProjectionRelativeToEye *czm_computePosition();\r\n              v_color = color;\r\n              gl_Position = position;\r\n          }`\r\n      }\r\n      function f_shader() {\r\n        return `\r\n          in vec4 v_color;\r\n          void main() {\r\n              vec4 color = czm_gammaCorrect(v_color);\r\n              out_FragColor = color;\r\n          }`\r\n      }\r\n      let appearance = new Appearance({\r\n        translucent: false, //显示不为半透明\r\n        closed: true,\r\n        renderState: {\r\n          blending: BlendingState.PRE_MULTIPLIED_ALPHA_BLEND, //使用Alpha混合功能启用混合\r\n          depthTest: { enabled: true }, //深度检测\r\n          depthMask: true, //将深度值写入深度缓冲区\r\n        },\r\n        fragmentShaderSource: f_shader(), //片段着色器\r\n        vertexShaderSource: v_shader(), //顶点着色器\r\n      })\r\n      //加入场景\r\n      scene.primitives.add(\r\n        new Primitive({\r\n          geometryInstances: instance,\r\n          appearance: appearance,\r\n          asynchronous: false,\r\n        })\r\n      )\r\n      //\r\n      viewer.camera.flyTo({\r\n        destination: Cartesian3.fromDegrees(116.23, 39.54, 500),\r\n        orientation: {\r\n          heading: CesiumMath.toRadians(0),\r\n          pitch: CesiumMath.toRadians(-90),\r\n          roll: 0.0,\r\n        },\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n#cesiumContainer {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./custom_geometry.vue?vue&type=template&id=1997bc3d&scoped=true\"\nimport script from \"./custom_geometry.vue?vue&type=script&lang=js\"\nexport * from \"./custom_geometry.vue?vue&type=script&lang=js\"\n\nimport \"./custom_geometry.vue?vue&type=style&index=0&id=1997bc3d&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\Documents\\\\GitHub\\\\Z-Personal\\\\webgis\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1997bc3d\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","mounted","this","init","methods","viewer","Viewer","FeatureDetection","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","vertices","Float32Array","colors","attributes","GeometryAttributes","position","GeometryAttribute","componentDatatype","ComponentDatatype","componentsPerAttribute","values","color","indices","Uint8Array","boundingSphere","BoundingSphere","Cartesian3","geometry","Geometry","primitiveType","PrimitiveType","modelMatrix","Matrix4","Transforms","instance","GeometryInstance","v_shader","f_shader","appearance","Appearance","translucent","closed","renderState","blending","BlendingState","depthTest","depthMask","fragmentShaderSource","vertexShaderSource","primitives","add","Primitive","geometryInstances","asynchronous","camera","flyTo","destination","orientation","heading","CesiumMath","pitch","roll","__exports__","render"],"sourceRoot":""}