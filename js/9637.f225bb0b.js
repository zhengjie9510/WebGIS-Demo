"use strict";(self["webpackChunkwebgis"]=self["webpackChunkwebgis"]||[]).push([[9637],{79637:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var i=n(73396);const r=e=>((0,i.dD)("data-v-65cafdd6"),e=e(),(0,i.Cn)(),e),a={class:"container"},o=r((()=>(0,i._)("canvas",{id:"c"},null,-1))),s=[o];function l(e,t,n,r,o,l){return(0,i.wg)(),(0,i.iD)("div",a,s)}var d=n(11114),c=n(84543),u=n(61273);let p,m,v,x,f,h;var w={mounted(){this.init(),this.animate()},methods:{init(){const e=document.querySelector("#c");let t,n;v=new d.CP7({canvas:e,antialias:!0}),v.setSize(e.innerWidth,e.innerHeight),v.setPixelRatio(window.devicePixelRatio),v.useLegacyLights=!1,m=new d.xsS,p=new d.cPb(45,e.clientWidth/e.clientHeight,1,500),p.position.set(0,75,100),x=new c.z(p,v.domElement),x.update(),t=new d.zf8(40,40),h=new u.r(t,{clipBias:.003,textureWidth:window.innerWidth*window.devicePixelRatio,textureHeight:window.innerHeight*window.devicePixelRatio}),h.position.y=.5,h.rotateX(-Math.PI/2),m.add(h),t=new d.cJO(5,0),n=new d.xoR({color:16777215,emissive:8092539,flatShading:!0}),f=new d.Kj0(t,n),m.add(f);const i=new d.cek(15198183,2.5,250,0);i.position.y=60,m.add(i);const r=new d.VLJ(100,100);m.add(r)},resizeRendererToDisplaySize(e){const t=e.domElement,n=t.clientWidth,i=t.clientHeight,r=t.width!==n||t.height!==i;return r&&(e.setSize(n,i,!1),h.getRenderTarget().setSize(n*window.devicePixelRatio,i*window.devicePixelRatio)),r},animate(){if(requestAnimationFrame(this.animate),this.resizeRendererToDisplaySize(v)){const e=v.domElement;p.aspect=e.clientWidth/e.clientHeight,p.updateProjectionMatrix()}const e=.01*Date.now();f.position.set(30*Math.cos(.1*e),20*Math.abs(Math.cos(.2*e))+5,30*Math.sin(.1*e)),f.rotation.y=Math.PI/2-.1*e,f.rotation.z=.8*e,x.update(),v.render(m,p)}}},g=n(40089);const b=(0,g.Z)(w,[["render",l],["__scopeId","data-v-65cafdd6"]]);var y=b},61273:function(e,t,n){n.d(t,{r:function(){return r}});var i=n(11114);class r extends i.Kj0{constructor(e,t={}){super(e),this.type="Reflector";const n=this,a=void 0!==t.color?new i.Ilk(t.color):new i.Ilk(8355711),o=t.textureWidth||512,s=t.textureHeight||512,l=t.clipBias||0,d=t.shader||r.ReflectorShader,c=new i.JOQ,u=new i.Pa4,p=new i.Pa4,m=new i.Pa4,v=new i.yGw,x=new i.Pa4(0,0,-1),f=new i.Ltg,h=new i.Pa4,w=new i.Pa4,g=new i.Ltg,b=new i.yGw,y=new i.cPb,M=new i.dd2(o,s),P=new i.jyz({uniforms:i.rDY.clone(d.uniforms),fragmentShader:d.fragmentShader,vertexShader:d.vertexShader});P.uniforms["tDiffuse"].value=M.texture,P.uniforms["color"].value=a,P.uniforms["textureMatrix"].value=b,this.material=P,this.onBeforeRender=function(e,t,i){if(p.setFromMatrixPosition(n.matrixWorld),m.setFromMatrixPosition(i.matrixWorld),v.extractRotation(n.matrixWorld),u.set(0,0,1),u.applyMatrix4(v),h.subVectors(p,m),h.dot(u)>0)return;h.reflect(u).negate(),h.add(p),v.extractRotation(i.matrixWorld),x.set(0,0,-1),x.applyMatrix4(v),x.add(m),w.subVectors(p,x),w.reflect(u).negate(),w.add(p),y.position.copy(h),y.up.set(0,1,0),y.up.applyMatrix4(v),y.up.reflect(u),y.lookAt(w),y.far=i.far,y.updateMatrixWorld(),y.projectionMatrix.copy(i.projectionMatrix),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(y.projectionMatrix),b.multiply(y.matrixWorldInverse),b.multiply(n.matrixWorld),c.setFromNormalAndCoplanarPoint(u,p),c.applyMatrix4(y.matrixWorldInverse),f.set(c.normal.x,c.normal.y,c.normal.z,c.constant);const r=y.projectionMatrix;g.x=(Math.sign(f.x)+r.elements[8])/r.elements[0],g.y=(Math.sign(f.y)+r.elements[9])/r.elements[5],g.z=-1,g.w=(1+r.elements[10])/r.elements[14],f.multiplyScalar(2/f.dot(g)),r.elements[2]=f.x,r.elements[6]=f.y,r.elements[10]=f.z+1-l,r.elements[14]=f.w,M.texture.encoding=e.outputEncoding,n.visible=!1;const a=e.getRenderTarget(),o=e.xr.enabled,s=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(M),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,y),e.xr.enabled=o,e.shadowMap.autoUpdate=s,e.setRenderTarget(a);const d=i.viewport;void 0!==d&&e.state.viewport(d),n.visible=!0},this.getRenderTarget=function(){return M},this.dispose=function(){M.dispose(),n.material.dispose()}}}r.prototype.isReflector=!0,r.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}"}}}]);
//# sourceMappingURL=9637.f225bb0b.js.map