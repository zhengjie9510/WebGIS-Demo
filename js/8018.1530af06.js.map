{"version":3,"file":"js/8018.1530af06.js","mappings":"kLACOA,GAAG,mB,0CAARC,EAAAA,EAAAA,IAAgC,MAAhCC,E,iHAOF,GACEC,OACE,MAAO,CAAEC,KAAMC,gBACjB,EACAC,UACEC,KAAKC,MACP,EACAC,QAAS,CACPC,aACE,IAAIC,EAAS,IAAIC,EAAAA,EAAc,kBAAmB,CAChDC,gBAAiB,IAAID,EAAAA,EAAkC,CACrDE,IAAK,6DACLC,WAAY,CAAC,IAAK,IAAK,IAAK,OAE9BC,sBAAuBJ,EAAAA,MAErBA,EAAAA,EAAAA,oCAEFD,EAAOM,gBAAkBC,OAAOC,kBAElCR,EAAOS,MAAMC,kBAAkBC,KAAKC,SAAU,EAC9CZ,EAAOS,MAAMI,0BAA2B,EAExC,MAAMC,EAAkBb,EAAAA,EAAAA,aACrB,kBACD,kBACA,KAEIc,EAAqB,IAAId,EAAAA,EAAAA,YAC7B,mBACC,kBACD,mBAEFD,EAAOS,MAAMO,OAAOC,QAAQ,CAC1BC,YAAaJ,EACbK,YAAaJ,EACbK,aAAcnB,EAAAA,EAAAA,WAGhB,MAAMoB,EAAe,IAAIpB,EAAAA,EAAoB,CAC3CqB,SAAU,CACRC,UAAW,CACTC,KAAMvB,EAAAA,EAAAA,MACNwB,MAAO,GAETC,UAAW,CACTF,KAAMvB,EAAAA,EAAAA,MACNwB,MAAO,IAGXE,mBAAoB,qlBAahBC,QAAgB3B,EAAAA,EAAAA,eAAsC,MAAO,CACjEoB,aAAcA,KAETQ,EAAWC,GAAa,CAC7BF,EAAQG,WAAW,0BAA0BC,QAC7CJ,EAAQG,WAAW,0BAA0BE,SAE/CL,EAAQP,aAAaa,WAAW,YAAaL,GAC7CD,EAAQP,aAAaa,WAAW,YAAaJ,GAC7C9B,EAAOS,MAAM0B,WAAWC,IAAIR,EAC9B,I,WC1EJ,MAAMS,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://webgis/./src/components/cesium/3dTiles_shader.vue","webpack://webgis/./src/components/cesium/3dTiles_shader.vue?ec14"],"sourcesContent":["<template>\n  <div id=\"cesiumContainer\"></div>\n</template>\n\n<script>\nimport 'cesium/Build/Cesium/Widgets/widgets.css'\nimport * as Cesium from 'cesium'\n\nexport default {\n  data() {\n    return { path: process.env.BASE_URL }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    async init() {\n      var viewer = new Cesium.Viewer('cesiumContainer', {\n        imageryProvider: new Cesium.UrlTemplateImageryProvider({\n          url: \"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png\",\n          subdomains: [\"a\", \"b\", \"c\", \"d\"],\n        }),\n        terrainProvider: await Cesium.createWorldTerrainAsync()\n      })\n      if (Cesium.FeatureDetection.supportsImageRenderingPixelated()) {\n        //判断是否支持图像渲染像素化处理\n        viewer.resolutionScale = window.devicePixelRatio\n      }\n      viewer.scene.postProcessStages.fxaa.enabled = true\n      viewer.scene.debugShowFramesPerSecond = true;\n\n      const initialPosition = Cesium.Cartesian3.fromDegrees(\n        -74.01881302800248,\n        40.69114333714821,\n        753\n      );\n      const initialOrientation = new Cesium.HeadingPitchRoll.fromDegrees(\n        21.27879878293835,\n        -21.34390550872461,\n        0.0716951918898415\n      );\n      viewer.scene.camera.setView({\n        destination: initialPosition,\n        orientation: initialOrientation,\n        endTransform: Cesium.Matrix4.IDENTITY,\n      });\n\n      const customShader = new Cesium.CustomShader({\n        uniforms: {\n          maxHeight: {\n            type: Cesium.UniformType.FLOAT,\n            value: 0.0,\n          },\n          minHeight: {\n            type: Cesium.UniformType.FLOAT,\n            value: 0.0,\n          },\n        },\n        fragmentShaderText: `\n          void fragmentMain(FragmentInput fsInput, inout czm_modelMaterial material) {\n            float curz = fsInput.attributes.positionMC.z;\n            float d = (curz - minHeight) / (maxHeight - minHeight);\n            float r = 0.01;\n            r = fract(r * czm_frameNumber);\n            float c = smoothstep(r, r+0.03, d) - smoothstep(r + 0.035,r + 0.04, d);\n            vec3 linearColor = mix(vec3(1.0,1.0,1.0) ,vec3(255.0,48.0,48.0)/255.0,r);\n            vec3 renderColor = mix(vec3(0.0,0.96,1.0) ,linearColor,c);\n            material.diffuse = renderColor;\n          }`\n      });\n\n      const tileset = await Cesium.Cesium3DTileset.fromIonAssetId(96188, {\n        customShader: customShader,\n      })\n      const [maxheight, minheight] = [\n        tileset.properties['cesium#estimatedHeight'].maximum,\n        tileset.properties['cesium#estimatedHeight'].minimum,\n      ];\n      tileset.customShader.setUniform(\"maxHeight\", maxheight);\n      tileset.customShader.setUniform(\"minHeight\", minheight);\n      viewer.scene.primitives.add(tileset);\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#cesiumContainer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n}\n</style>\n","import { render } from \"./3dTiles_shader.vue?vue&type=template&id=6aa4c712&scoped=true\"\nimport script from \"./3dTiles_shader.vue?vue&type=script&lang=js\"\nexport * from \"./3dTiles_shader.vue?vue&type=script&lang=js\"\n\nimport \"./3dTiles_shader.vue?vue&type=style&index=0&id=6aa4c712&lang=scss&scoped=true\"\n\nimport exportComponent from \"/Users/zhengjie/Documents/webgis/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6aa4c712\"]])\n\nexport default __exports__"],"names":["id","_createElementBlock","_hoisted_1","data","path","process","mounted","this","init","methods","async","viewer","Cesium","imageryProvider","url","subdomains","terrainProvider","resolutionScale","window","devicePixelRatio","scene","postProcessStages","fxaa","enabled","debugShowFramesPerSecond","initialPosition","initialOrientation","camera","setView","destination","orientation","endTransform","customShader","uniforms","maxHeight","type","value","minHeight","fragmentShaderText","tileset","maxheight","minheight","properties","maximum","minimum","setUniform","primitives","add","__exports__","render"],"sourceRoot":""}